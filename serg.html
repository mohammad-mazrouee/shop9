<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù¾Ø´ÙˆØ§Ú© - ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap');
*{margin:0;padding:0;box-sizing:border-box}
:root{
--primary:#1a1a2e;--secondary:#16213e;--accent:#e94560;--accent2:#0f3460;
--gold:#d4a574;--gold-light:#e8c9a0;--bg:#fafafa;--card:#fff;
--text:#1a1a2e;--text-light:#666;--border:#e0e0e0;--shadow:0 2px 20px rgba(0,0,0,.08);
--radius:12px;--transition:all .3s cubic-bezier(.4,0,.2,1);
--btn-primary:#1a1a2e;--btn-primary-text:#fff;
--cat-shoe:#667eea;--cat-cloth:#f093fb;--cat-bag:#4facfe;
}
body{font-family:'Vazirmatn',Tahoma,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.8;overflow-x:hidden}
a{text-decoration:none;color:inherit}
button{cursor:pointer;font-family:inherit;border:none;outline:none}
input,select,textarea{font-family:inherit;outline:none}
.container{max-width:1280px;margin:0 auto;padding:0 20px}

::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:#f1f1f1}
::-webkit-scrollbar-thumb{background:var(--gold);border-radius:4px}

/* Header */
.header{position:sticky;top:0;z-index:1000;background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);transition:var(--transition)}
.header-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 0;gap:20px}
.logo{font-size:28px;font-weight:900;color:var(--primary);letter-spacing:-1px}
.logo span{color:var(--gold)}
.nav{display:flex;gap:8px;align-items:center}
.nav a,.nav button{padding:8px 16px;border-radius:8px;font-size:14px;font-weight:500;transition:var(--transition);background:none;color:var(--text)}
.nav a:hover,.nav button:hover{background:var(--primary);color:#fff}
.nav-icons{display:flex;gap:12px;align-items:center}
.nav-icon{position:relative;width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#f5f5f5;transition:var(--transition);cursor:pointer;border:none}
.nav-icon:hover{background:var(--primary);color:#fff;transform:scale(1.1)}
.nav-icon .badge{position:absolute;top:-2px;right:-2px;background:var(--accent);color:#fff;font-size:11px;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}
.mobile-menu-btn{display:none;background:none;border:none;font-size:24px;cursor:pointer}

/* Hero */
.hero{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 50%,var(--accent2) 100%);color:#fff;padding:80px 0;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(212,165,116,.15) 0%,transparent 70%);animation:heroGlow 6s ease-in-out infinite}
.hero::after{content:'';position:absolute;bottom:-30%;left:-30%;width:80%;height:80%;background:radial-gradient(circle,rgba(233,69,96,.1) 0%,transparent 60%);animation:heroGlow 8s ease-in-out infinite reverse}
@keyframes heroGlow{0%,100%{transform:translate(0,0)}50%{transform:translate(-30px,30px)}}
.hero-content{position:relative;z-index:1;text-align:center}
.hero h1{font-size:52px;font-weight:900;margin-bottom:16px;text-shadow:0 4px 20px rgba(0,0,0,.3);animation:heroTitle 1s ease-out}
@keyframes heroTitle{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
.hero h1 span{color:var(--gold)}
.hero p{font-size:20px;opacity:.9;margin-bottom:32px;max-width:600px;margin-left:auto;margin-right:auto;animation:heroTitle 1s ease-out .2s both}
.hero-btn{display:inline-block;padding:16px 48px;background:var(--gold);color:var(--primary);font-size:18px;font-weight:700;border-radius:50px;transition:var(--transition);border:none;animation:heroTitle 1s ease-out .4s both}
.hero-btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(212,165,116,.4)}

/* Live Stats Bar */
.live-stats-bar{background:linear-gradient(90deg,var(--primary),var(--accent2));padding:16px 0;border-bottom:2px solid var(--gold)}
.live-stats-inner{display:flex;justify-content:center;gap:48px;flex-wrap:wrap}
.live-stat{text-align:center;color:#fff}
.live-stat .stat-number{font-size:28px;font-weight:900;color:var(--gold);display:block}
.live-stat .stat-text{font-size:13px;opacity:.8}
@keyframes countUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.live-stat{animation:countUp .6s ease-out both}
.live-stat:nth-child(2){animation-delay:.15s}
.live-stat:nth-child(3){animation-delay:.3s}
.live-stat:nth-child(4){animation-delay:.45s}

/* Section */
.section{padding:60px 0}
.section-title{text-align:center;margin-bottom:40px}
.section-title h2{font-size:32px;font-weight:800;color:var(--primary)}
.section-title p{color:var(--text-light);margin-top:8px}
.section-title::after{content:'';display:block;width:60px;height:4px;background:var(--gold);margin:12px auto 0;border-radius:2px}

/* Categories */
.categories-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}
.cat-card{position:relative;height:250px;border-radius:var(--radius);overflow:hidden;cursor:pointer;transition:var(--transition)}
.cat-card:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 40px rgba(0,0,0,.2)}
.cat-card-bg{width:100%;height:100%;transition:var(--transition)}
.cat-card:hover .cat-card-bg{transform:scale(1.1)}
.cat-card-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.7),transparent);display:flex;align-items:flex-end;padding:24px;transition:var(--transition)}
.cat-card:hover .cat-card-overlay{background:linear-gradient(to top,rgba(0,0,0,.85),rgba(0,0,0,.2))}
.cat-card-overlay h3{color:#fff;font-size:24px;font-weight:700;transition:var(--transition);transform:translateY(0)}
.cat-card:hover .cat-card-overlay h3{transform:translateY(-5px)}

/* Product Card */
.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:24px}
.product-card{background:var(--card);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);transition:var(--transition);position:relative;animation:cardIn .5s ease-out both}
@keyframes cardIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.product-card:hover{transform:translateY(-8px);box-shadow:0 12px 35px rgba(0,0,0,.15)}
.product-card-img{position:relative;height:280px;overflow:hidden;background:#f0f0f0}
.product-card-img img{width:100%;height:100%;object-fit:cover;transition:transform .5s cubic-bezier(.4,0,.2,1)}
.product-card:hover .product-card-img img{transform:scale(1.08)}
.product-discount-badge{position:absolute;top:12px;right:12px;background:var(--accent);color:#fff;padding:4px 12px;border-radius:20px;font-size:13px;font-weight:700;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
.product-fav-btn{position:absolute;top:12px;left:12px;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,.9);display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;transition:var(--transition);font-size:16px}
.product-fav-btn:hover,.product-fav-btn.active{background:var(--accent);color:#fff;transform:scale(1.15)}
.product-card-body{padding:16px}
.product-card-cat{font-size:12px;color:var(--gold);font-weight:600;margin-bottom:4px}
.product-card-title{font-size:16px;font-weight:700;margin-bottom:8px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}
.product-card-rating{display:flex;gap:2px;margin-bottom:8px;color:var(--gold);font-size:14px}
.product-card-price{display:flex;align-items:center;gap:8px}
.price-current{font-size:18px;font-weight:800;color:var(--primary)}
.price-old{font-size:14px;color:#999;text-decoration:line-through}
.product-card-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}
.add-cart-btn{padding:8px 20px;background:var(--btn-primary);color:var(--btn-primary-text);border-radius:8px;font-size:13px;font-weight:600;transition:var(--transition);border:none}
.add-cart-btn:hover{background:var(--gold);color:var(--primary);transform:scale(1.05)}
.product-sales{font-size:12px;color:var(--text-light)}

/* Filters */
.filters-bar{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:24px;align-items:center}
.filter-group{display:flex;align-items:center;gap:8px}
.filter-group label{font-size:14px;font-weight:600}
.filter-group select,.filter-group input{padding:8px 16px;border:1px solid var(--border);border-radius:8px;font-size:14px;background:#fff;transition:var(--transition)}
.filter-group select:focus,.filter-group input:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,165,116,.15)}
.search-input{flex:1;min-width:200px;padding:10px 20px;border:1px solid var(--border);border-radius:8px;font-size:14px;transition:var(--transition)}
.search-input:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,165,116,.15)}

/* Single Product */
.single-product{display:grid;grid-template-columns:1fr 1fr;gap:48px;padding:40px 0}
.sp-gallery{position:relative}
.sp-main-img{width:100%;height:500px;object-fit:cover;border-radius:var(--radius);background:#f0f0f0;transition:var(--transition)}
.sp-main-img:hover{transform:scale(1.02)}
.sp-info h1{font-size:28px;font-weight:800;margin-bottom:12px}
.sp-category{color:var(--gold);font-weight:600;margin-bottom:16px}
.sp-rating{display:flex;gap:4px;color:var(--gold);margin-bottom:16px;font-size:18px}
.sp-price-box{display:flex;align-items:center;gap:16px;margin-bottom:24px}
.sp-price{font-size:32px;font-weight:900;color:var(--primary)}
.sp-old-price{font-size:20px;color:#999;text-decoration:line-through}
.sp-discount{background:var(--accent);color:#fff;padding:4px 12px;border-radius:20px;font-size:14px;font-weight:700}
.sp-desc{color:var(--text-light);margin-bottom:24px;line-height:2}
.sp-sizes{margin-bottom:24px}
.sp-sizes h4{margin-bottom:12px;font-weight:700}
.sizes-list{display:flex;gap:8px;flex-wrap:wrap}
.size-btn{padding:8px 20px;border:2px solid var(--border);border-radius:8px;background:#fff;font-weight:600;transition:var(--transition);cursor:pointer}
.size-btn:hover,.size-btn.active{border-color:var(--primary);background:var(--primary);color:#fff;transform:scale(1.05)}
.size-btn.out-of-stock{opacity:.4;cursor:not-allowed;text-decoration:line-through}
.sp-colors{margin-bottom:24px}
.sp-colors h4{margin-bottom:12px;font-weight:700}
.sp-quantity{display:flex;align-items:center;gap:12px;margin-bottom:24px}
.qty-btn{width:40px;height:40px;border-radius:8px;border:1px solid var(--border);background:#fff;font-size:20px;font-weight:700;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition)}
.qty-btn:hover{background:var(--primary);color:#fff}
.qty-val{font-size:20px;font-weight:700;min-width:40px;text-align:center}
.sp-actions{display:flex;gap:12px}
.sp-add-cart{flex:1;padding:14px;background:var(--btn-primary);color:var(--btn-primary-text);border-radius:var(--radius);font-size:16px;font-weight:700;transition:var(--transition);border:none}
.sp-add-cart:hover{background:var(--gold);color:var(--primary);transform:translateY(-2px)}
.sp-add-fav{width:54px;height:54px;border-radius:var(--radius);border:2px solid var(--border);background:#fff;font-size:22px;display:flex;align-items:center;justify-content:center;transition:var(--transition);cursor:pointer}
.sp-add-fav:hover,.sp-add-fav.active{border-color:var(--accent);background:var(--accent);color:#fff;transform:scale(1.1)}
.sp-long-desc{margin-top:40px;padding:24px;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
.sp-long-desc h3{margin-bottom:16px;font-weight:700}

/* Reviews */
.reviews-section{margin-top:32px;padding:24px;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);grid-column:1/-1}
.reviews-section h3{font-weight:800;font-size:20px;margin-bottom:20px;display:flex;align-items:center;gap:8px}
.review-form{background:#f8f8f8;border-radius:var(--radius);padding:20px;margin-bottom:24px}
.review-form h4{margin-bottom:12px;font-weight:700}
.star-rating-input{display:flex;gap:4px;margin-bottom:12px;direction:ltr}
.star-rating-input span{font-size:28px;cursor:pointer;color:#ddd;transition:var(--transition)}
.star-rating-input span:hover,.star-rating-input span.active{color:var(--gold);transform:scale(1.2)}
.review-textarea{width:100%;padding:12px;border:1px solid var(--border);border-radius:8px;min-height:80px;resize:vertical;font-size:14px}
.review-submit{padding:10px 32px;background:var(--btn-primary);color:var(--btn-primary-text);border-radius:8px;font-weight:700;border:none;transition:var(--transition);margin-top:8px}
.review-submit:hover{background:var(--gold);color:var(--primary)}
.reviews-sort{display:flex;gap:8px;margin-bottom:16px;align-items:center}
.reviews-sort label{font-size:13px;font-weight:600}
.reviews-sort select{padding:6px 12px;border:1px solid var(--border);border-radius:6px;font-size:13px}
.review-card{border-bottom:1px solid var(--border);padding:16px 0;animation:fadeIn .4s ease}
.review-card:last-child{border:none}
.review-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.review-user{font-weight:700;font-size:14px}
.review-date{font-size:12px;color:#999}
.review-stars{color:var(--gold);font-size:16px;margin-bottom:6px}
.review-text{color:var(--text-light);font-size:14px;line-height:1.8}
.review-avg{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,#fff9f0,#fff5e6);border-radius:var(--radius);margin-bottom:20px}
.review-avg-num{font-size:36px;font-weight:900;color:var(--gold)}
.review-avg-stars{color:var(--gold);font-size:20px}
.review-avg-count{font-size:13px;color:#999}

/* Cart */
.cart-items{display:flex;flex-direction:column;gap:16px}
.cart-item{display:flex;gap:16px;padding:16px;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);align-items:center;transition:var(--transition);animation:cardIn .4s ease}
.cart-item:hover{box-shadow:0 6px 25px rgba(0,0,0,.12)}
.cart-item-img{width:100px;height:100px;object-fit:cover;border-radius:8px;background:#f0f0f0}
.cart-item-info{flex:1}
.cart-item-title{font-weight:700;margin-bottom:4px}
.cart-item-meta{font-size:13px;color:var(--text-light)}
.cart-item-price{font-weight:800;font-size:18px}
.cart-item-remove{background:none;border:none;color:var(--accent);font-size:20px;cursor:pointer;padding:8px;transition:var(--transition)}
.cart-item-remove:hover{transform:scale(1.2)}
.cart-summary{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px;margin-top:24px}
.cart-summary-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border)}
.cart-summary-row:last-child{border:none;font-weight:800;font-size:20px;color:var(--primary)}
.discount-input-group{display:flex;gap:8px;margin-top:16px}
.discount-input-group input{flex:1;padding:10px 16px;border:1px solid var(--border);border-radius:8px}
.discount-input-group button{padding:10px 24px;background:var(--gold);color:var(--primary);border-radius:8px;font-weight:700;border:none;transition:var(--transition)}
.discount-input-group button:hover{transform:scale(1.05)}
.checkout-btn{width:100%;padding:16px;background:var(--btn-primary);color:var(--btn-primary-text);border-radius:var(--radius);font-size:18px;font-weight:700;margin-top:16px;transition:var(--transition);border:none}
.checkout-btn:hover{background:var(--gold);color:var(--primary);transform:translateY(-2px)}

/* Favorites */
.fav-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:24px}

/* Auth Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:2000;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:var(--transition)}
.modal-overlay.active{opacity:1;visibility:visible}
.modal{background:#fff;border-radius:16px;padding:40px;width:90%;max-width:440px;position:relative;transform:translateY(20px) scale(.95);transition:var(--transition);box-shadow:0 20px 60px rgba(0,0,0,.3)}
.modal-overlay.active .modal{transform:translateY(0) scale(1)}
.modal-close{position:absolute;top:16px;left:16px;background:none;border:none;font-size:24px;cursor:pointer;color:#999;transition:var(--transition)}
.modal-close:hover{transform:rotate(90deg);color:var(--accent)}
.modal h2{font-size:24px;font-weight:800;margin-bottom:24px;text-align:center}
.form-group{margin-bottom:16px}
.form-group label{display:block;font-size:14px;font-weight:600;margin-bottom:6px}
.form-group input{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;font-size:15px;transition:var(--transition)}
.form-group input:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,165,116,.2)}
.form-btn{width:100%;padding:14px;background:var(--btn-primary);color:var(--btn-primary-text);border-radius:8px;font-size:16px;font-weight:700;border:none;transition:var(--transition);margin-top:8px}
.form-btn:hover{background:var(--gold);color:var(--primary);transform:translateY(-1px)}
.form-switch{text-align:center;margin-top:16px;font-size:14px}
.form-switch a{color:var(--gold);font-weight:700;cursor:pointer}

/* 2FA */
.twofa-section{text-align:center;padding:20px 0}
.twofa-code{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent2));color:var(--gold);font-size:36px;font-weight:900;letter-spacing:12px;padding:16px 32px;border-radius:12px;margin:16px 0;font-family:monospace}
.twofa-input{display:flex;gap:8px;justify-content:center;margin:16px 0}
.twofa-input input{width:48px;height:54px;text-align:center;font-size:24px;font-weight:700;border:2px solid var(--border);border-radius:8px;transition:var(--transition)}
.twofa-input input:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,165,116,.3)}
.twofa-timer{color:var(--accent);font-weight:700;font-size:14px}

/* About & Contact */
.about-content{max-width:800px;margin:0 auto;text-align:center}
.about-content h1{font-size:36px;font-weight:900;margin-bottom:24px}
.about-content p{color:var(--text-light);line-height:2.2;margin-bottom:16px;font-size:16px}
.contact-form{max-width:600px;margin:0 auto;background:var(--card);padding:32px;border-radius:var(--radius);box-shadow:var(--shadow)}
.contact-form textarea{width:100%;padding:12px 16px;border:1px solid var(--border);border-radius:8px;font-size:15px;min-height:120px;resize:vertical}

/* Admin */
.admin-layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
.admin-sidebar{background:var(--primary);color:#fff;padding:24px;overflow-y:auto}
.admin-sidebar h2{font-size:20px;font-weight:800;margin-bottom:24px;color:var(--gold)}
.admin-nav{display:flex;flex-direction:column;gap:4px}
.admin-nav button{padding:12px 16px;background:none;border:none;color:rgba(255,255,255,.7);text-align:right;border-radius:8px;font-size:14px;font-weight:500;transition:var(--transition);cursor:pointer;display:flex;align-items:center;gap:8px}
.admin-nav button:hover,.admin-nav button.active{background:rgba(255,255,255,.1);color:#fff}
.admin-content{padding:32px;background:#f5f5f5;overflow-y:auto;max-height:100vh}
.admin-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:32px}
.stat-card{background:#fff;border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);transition:var(--transition);border-right:4px solid var(--gold)}
.stat-card:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(0,0,0,.12)}
.stat-card .stat-icon{font-size:28px;margin-bottom:8px}
.stat-card .stat-num{font-size:28px;font-weight:900;color:var(--primary)}
.stat-card .stat-label{font-size:13px;color:var(--text-light)}
.admin-table{width:100%;background:#fff;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow)}
.admin-table th{background:var(--primary);color:#fff;padding:12px 16px;text-align:right;font-size:13px}
.admin-table td{padding:12px 16px;border-bottom:1px solid var(--border);font-size:13px}
.admin-table tr:hover td{background:#f9f9f9}
.admin-btn{padding:6px 14px;border-radius:6px;font-size:12px;font-weight:600;border:none;cursor:pointer;transition:var(--transition)}
.admin-btn:hover{transform:scale(1.05)}
.admin-btn-edit{background:#e3f2fd;color:#1976d2}
.admin-btn-delete{background:#fce4ec;color:#c62828}
.admin-btn-add{background:var(--gold);color:var(--primary);padding:10px 24px;font-size:14px;border-radius:8px;margin-bottom:16px}
.admin-form{background:#fff;border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);margin-bottom:24px}
.admin-form .form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.chart-bar-container{display:flex;align-items:flex-end;gap:12px;height:200px;padding:20px;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow)}
.chart-bar{flex:1;background:linear-gradient(to top,var(--gold),var(--gold-light));border-radius:6px 6px 0 0;position:relative;transition:var(--transition);min-width:30px}
.chart-bar:hover{opacity:.8;transform:scaleY(1.02);transform-origin:bottom}
.chart-bar-label{position:absolute;bottom:-28px;left:50%;transform:translateX(-50%);font-size:11px;white-space:nowrap;font-weight:600}
.chart-bar-val{position:absolute;top:-24px;left:50%;transform:translateX(-50%);font-size:12px;font-weight:700}

/* Security Alert */
.security-alert{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border:1px solid #ffb74d;border-radius:var(--radius);padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;gap:12px;animation:alertPulse 3s ease-in-out infinite}
@keyframes alertPulse{0%,100%{opacity:1}50%{opacity:.85}}
.security-alert.danger{background:linear-gradient(135deg,#fce4ec,#f8bbd0);border-color:#e91e63}
.security-alert.success{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-color:#4caf50;animation:none}
.security-alert .alert-icon{font-size:24px}
.security-alert .alert-text{flex:1;font-size:13px;font-weight:600}

/* Admin Color Picker Section */
.color-picker-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:24px}
.color-picker-card{background:#fff;border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);text-align:center}
.color-picker-card label{font-size:13px;font-weight:700;display:block;margin-bottom:8px}
.color-picker-card input[type="color"]{width:60px;height:40px;border:none;border-radius:8px;cursor:pointer}
.color-picker-card .hex-input{width:100%;padding:6px;border:1px solid var(--border);border-radius:6px;text-align:center;font-size:13px;margin-top:6px;font-family:monospace}

/* Banner */
.discount-banner{background:linear-gradient(135deg,var(--accent) 0%,#ff6b6b 100%);color:#fff;padding:40px;border-radius:var(--radius);text-align:center;margin:40px 0;transition:var(--transition);position:relative;overflow:hidden}
.discount-banner::before{content:'';position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.1),transparent);animation:heroGlow 4s ease-in-out infinite}
.discount-banner h2{font-size:28px;font-weight:900;margin-bottom:8px;position:relative}
.discount-banner p{font-size:16px;opacity:.9;position:relative}

/* Footer */
.footer{background:var(--primary);color:rgba(255,255,255,.7);padding:48px 0 24px}
.footer-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:32px;margin-bottom:32px}
.footer h4{color:#fff;font-weight:700;margin-bottom:16px}
.footer a{display:block;padding:4px 0;transition:var(--transition);font-size:14px}
.footer a:hover{color:var(--gold);padding-right:8px}
.footer-bottom{text-align:center;padding-top:24px;border-top:1px solid rgba(255,255,255,.1);font-size:13px}

/* Toast */
.toast-container{position:fixed;top:80px;left:20px;z-index:3000;display:flex;flex-direction:column;gap:8px}
.toast{padding:14px 24px;background:#fff;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.15);font-size:14px;font-weight:600;animation:toastIn .4s cubic-bezier(.4,0,.2,1);min-width:250px;display:flex;align-items:center;gap:8px}
.toast.success{border-right:4px solid #4caf50}
.toast.error{border-right:4px solid var(--accent)}
.toast.info{border-right:4px solid var(--accent2)}
.toast.warning{border-right:4px solid #ff9800}
@keyframes toastIn{from{transform:translateX(-100%);opacity:0}to{transform:translateX(0);opacity:1}}

/* Order */
.order-card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);margin-bottom:16px;transition:var(--transition)}
.order-card:hover{box-shadow:0 6px 25px rgba(0,0,0,.1)}
.order-card h4{font-weight:700;margin-bottom:8px}
.order-status{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:700}
.order-status.pending{background:#fff3e0;color:#e65100}
.order-status.completed{background:#e8f5e9;color:#2e7d32}

.qty-controls{display:flex;align-items:center;gap:8px}
.color-dot{width:24px;height:24px;border-radius:50%;border:2px solid var(--border);display:inline-block;margin:0 4px;transition:var(--transition)}
.color-dot:hover{transform:scale(1.2)}

/* Responsive */
@media(max-width:768px){
.nav{display:none}
.mobile-menu-btn{display:block}
.nav.mobile-open{display:flex;flex-direction:column;position:absolute;top:100%;right:0;left:0;background:#fff;padding:16px;box-shadow:var(--shadow);z-index:100}
.categories-grid{grid-template-columns:1fr}
.single-product{grid-template-columns:1fr}
.hero h1{font-size:32px}
.hero p{font-size:16px}
.admin-layout{grid-template-columns:1fr}
.admin-sidebar{display:none}
.admin-sidebar.mobile-open{display:block;position:fixed;inset:0;z-index:2000}
.filters-bar{flex-direction:column}
.admin-form .form-row{grid-template-columns:1fr}
.products-grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
.live-stats-inner{gap:20px}
.live-stat .stat-number{font-size:22px}
.twofa-input input{width:40px;height:46px;font-size:20px}
}

/* Page transitions */
.page{display:none;animation:pageIn .5s cubic-bezier(.4,0,.2,1)}
.page.active{display:block}
@keyframes pageIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}

.empty-state{text-align:center;padding:60px 20px;color:var(--text-light)}
.empty-state .empty-icon{font-size:64px;margin-bottom:16px}
.empty-state p{font-size:18px;margin-bottom:16px}

.spinner{width:40px;height:40px;border:4px solid var(--border);border-top-color:var(--gold);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Pie Chart CSS */
.pie-chart-container{display:flex;gap:24px;align-items:center;flex-wrap:wrap;background:#fff;border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);margin-bottom:24px}
.pie-chart{width:180px;height:180px;border-radius:50%;position:relative}
.pie-legend{display:flex;flex-direction:column;gap:6px}
.pie-legend-item{display:flex;align-items:center;gap:8px;font-size:13px}
.pie-legend-dot{width:12px;height:12px;border-radius:50%;flex-shrink:0}

/* Admin Toggle */
.toggle-switch{position:relative;width:48px;height:26px;display:inline-block}
.toggle-switch input{opacity:0;width:0;height:0}
.toggle-slider{position:absolute;inset:0;background:#ccc;border-radius:26px;cursor:pointer;transition:var(--transition)}
.toggle-slider::before{content:'';position:absolute;width:20px;height:20px;border-radius:50%;background:#fff;top:3px;right:3px;transition:var(--transition)}
.toggle-switch input:checked+.toggle-slider{background:var(--gold)}
.toggle-switch input:checked+.toggle-slider::before{transform:translateX(-22px)}
</style>
</head>
<body>

<div class="toast-container" id="toastContainer"></div>

<!-- Auth Modal -->
<div class="modal-overlay" id="authModal">
<div class="modal">
<button class="modal-close" onclick="closeAuthModal()">âœ•</button>
<div id="loginForm">
<h2>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨</h2>
<div class="form-group"><label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label><input type="text" id="loginUsername" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"></div>
<div class="form-group"><label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label><input type="password" id="loginPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"></div>
<button class="form-btn" onclick="login()">ÙˆØ±ÙˆØ¯</button>
<p class="form-switch">Ø­Ø³Ø§Ø¨ Ù†Ø¯Ø§Ø±ÛŒØ¯ØŸ <a onclick="showRegister()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯</a></p>
</div>
<div id="registerForm" style="display:none">
<h2>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h2>
<div class="form-group"><label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label><input type="text" id="regName" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"></div>
<div class="form-group"><label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label><input type="text" id="regUsername" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ù„Ø®ÙˆØ§Ù‡"></div>
<div class="form-group"><label>Ø§ÛŒÙ…ÛŒÙ„</label><input type="email" id="regEmail" placeholder="example@email.com"></div>
<div class="form-group"><label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label><input type="password" id="regPassword" placeholder="Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±"></div>
<button class="form-btn" onclick="register()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
<p class="form-switch">Ø­Ø³Ø§Ø¨ Ø¯Ø§Ø±ÛŒØ¯ØŸ <a onclick="showLogin()">ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</a></p>
</div>
<div id="twofaForm" style="display:none">
<h2>ğŸ” Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</h2>
<div class="twofa-section">
<p style="color:var(--text-light);margin-bottom:12px">Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø²ÛŒØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
<div class="twofa-code" id="twofaDisplay"></div>
<p class="twofa-timer" id="twofaTimer"></p>
<div class="twofa-input" id="twofaInputs"></div>
<button class="form-btn" onclick="verifyTwoFA()">ØªØ£ÛŒÛŒØ¯ Ùˆ ÙˆØ±ÙˆØ¯</button>
</div>
</div>
</div>
</div>

<!-- Header -->
<header class="header" id="mainHeader">
<div class="container header-inner">
<a class="logo" href="#" onclick="navigateTo('home')">Ù¾Ø´Ùˆ<span>Ø§Ú©</span></a>
<nav class="nav" id="mainNav">
<a href="#" onclick="navigateTo('home')">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
<a href="#" onclick="navigateTo('products')">Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
<a href="#" onclick="navigateTo('about')">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a>
<a href="#" onclick="navigateTo('contact')">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a>
<button id="adminNavBtn" style="display:none" onclick="navigateTo('admin')">ğŸ›¡ï¸ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</button>
</nav>
<div class="nav-icons">
<button class="nav-icon" onclick="navigateTo('favorites')" title="Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§">â™¡<span class="badge" id="favCount">Û°</span></button>
<button class="nav-icon" onclick="navigateTo('cart')" title="Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯">ğŸ›’<span class="badge" id="cartCount">Û°</span></button>
<button class="nav-icon" id="userBtn" onclick="handleUserBtn()" title="Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ">ğŸ‘¤</button>
<button class="mobile-menu-btn" onclick="toggleMobileMenu()">â˜°</button>
</div>
</div>
</header>

<main>
<!-- Home Page -->
<div class="page active" id="page-home">
<section class="hero">
<div class="container hero-content">
<h1>Ø¨Ù‡ <span>Ù¾Ø´ÙˆØ§Ú©</span> Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h1>
<p>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ† Ù„ÙˆÚ©Ø³ Ú©ÙØ´ØŒ Ù„Ø¨Ø§Ø³ Ùˆ Ú©ÛŒÙ Ø¨Ø§ Ø¨Ù‡ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ùˆ Ù‚ÛŒÙ…Øª</p>
<button class="hero-btn" onclick="navigateTo('products')">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª</button>
</div>
</section>

<div class="live-stats-bar">
<div class="container">
<div class="live-stats-inner" id="liveStatsBar"></div>
</div>
</div>

<section class="section">
<div class="container">
<div class="section-title"><h2>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h2><p>Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯</p></div>
<div class="categories-grid">
<div class="cat-card" onclick="filterByCategory('Ú©ÙØ´')"><div class="cat-card-bg" style="background:linear-gradient(135deg,var(--cat-shoe),#764ba2);width:100%;height:100%"></div><div class="cat-card-overlay"><h3>ğŸ‘Ÿ Ú©ÙØ´</h3></div></div>
<div class="cat-card" onclick="filterByCategory('Ù„Ø¨Ø§Ø³')"><div class="cat-card-bg" style="background:linear-gradient(135deg,var(--cat-cloth),#f5576c);width:100%;height:100%"></div><div class="cat-card-overlay"><h3>ğŸ‘— Ù„Ø¨Ø§Ø³</h3></div></div>
<div class="cat-card" onclick="filterByCategory('Ú©ÛŒÙ')"><div class="cat-card-bg" style="background:linear-gradient(135deg,var(--cat-bag),#00f2fe);width:100%;height:100%"></div><div class="cat-card-overlay"><h3>ğŸ‘œ Ú©ÛŒÙ</h3></div></div>
</div>
</div>
</section>

<section class="section" style="background:#f5f5f5">
<div class="container">
<div class="section-title"><h2>Ù…Ø­ØµÙˆÙ„Ø§Øª ÙˆÛŒÚ˜Ù‡</h2><p>Ø¨Ø±ØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡</p></div>
<div class="products-grid" id="featuredProducts"></div>
</div>
</section>

<div class="container">
<div class="discount-banner">
<h2>ğŸ‰ ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ ÙØµÙ„</h2>
<p>ØªØ§ ÛµÛ°Ùª ØªØ®ÙÛŒÙ Ø±ÙˆÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…Ù†ØªØ®Ø¨</p>
</div>
</div>

<section class="section">
<div class="container">
<div class="section-title"><h2>Ù¾Ø±ÙØ±ÙˆØ´â€ŒØªØ±ÛŒÙ†â€ŒÙ‡Ø§</h2><p>Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¯Ø± Ø¨ÛŒÙ† Ù…Ø´ØªØ±ÛŒØ§Ù†</p></div>
<div class="products-grid" id="bestSellers"></div>
</div>
</section>
</div>

<!-- Products Page -->
<div class="page" id="page-products">
<section class="section">
<div class="container">
<div class="section-title"><h2>Ù‡Ù…Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª</h2></div>
<div class="filters-bar">
<input type="text" class="search-input" id="searchInput" placeholder="ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„..." oninput="filterProducts()">
<div class="filter-group"><label>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</label><select id="categoryFilter" onchange="filterProducts()"><option value="">Ù‡Ù…Ù‡</option><option value="Ú©ÙØ´">Ú©ÙØ´</option><option value="Ù„Ø¨Ø§Ø³">Ù„Ø¨Ø§Ø³</option><option value="Ú©ÛŒÙ">Ú©ÛŒÙ</option></select></div>
<div class="filter-group"><label>Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ:</label><select id="sortFilter" onchange="filterProducts()"><option value="">Ù¾ÛŒØ´â€ŒÙØ±Ø¶</option><option value="price-asc">Ø§Ø±Ø²Ø§Ù†â€ŒØªØ±ÛŒÙ†</option><option value="price-desc">Ú¯Ø±Ø§Ù†â€ŒØªØ±ÛŒÙ†</option><option value="popular">Ù¾Ø±ÙØ±ÙˆØ´â€ŒØªØ±ÛŒÙ†</option><option value="rating">Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</option></select></div>
<div class="filter-group"><label>Ø­Ø¯Ø§Ú©Ø«Ø± Ù‚ÛŒÙ…Øª:</label><input type="number" id="maxPriceFilter" placeholder="ØªÙˆÙ…Ø§Ù†" oninput="filterProducts()" style="width:130px"></div>
</div>
<div class="products-grid" id="allProducts"></div>
</div>
</section>
</div>

<!-- Single Product Page -->
<div class="page" id="page-product">
<div class="container">
<div class="single-product" id="singleProductContent"></div>
</div>
</div>

<!-- Cart Page -->
<div class="page" id="page-cart">
<section class="section"><div class="container"><div class="section-title"><h2>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h2></div><div id="cartContent"></div></div></section>
</div>

<!-- Favorites Page -->
<div class="page" id="page-favorites">
<section class="section"><div class="container"><div class="section-title"><h2>Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h2></div><div class="fav-grid" id="favContent"></div></div></section>
</div>

<!-- About Page -->
<div class="page" id="page-about">
<section class="section"><div class="container about-content">
<h1>Ø¯Ø±Ø¨Ø§Ø±Ù‡ <span style="color:var(--gold)">Ù¾Ø´ÙˆØ§Ú©</span></h1>
<p>Ù¾Ø´ÙˆØ§Ú©ØŒ Ø¨Ø±Ù†Ø¯ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¨Ø§ Ø§Ù„Ù‡Ø§Ù… Ø§Ø² ÙØ±Ù‡Ù†Ú¯ ØºÙ†ÛŒ Ø§ÛŒØ±Ø§Ù†â€ŒØ²Ù…ÛŒÙ†ØŒ Ø¨Ø§ Ù‡Ø¯Ù Ø§Ø±Ø§Ø¦Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§Ú©ÛŒÙÛŒØª Ùˆ Ù„ÙˆÚ©Ø³ Ø¯Ø± Ø²Ù…ÛŒÙ†Ù‡ Ú©ÙØ´ØŒ Ù„Ø¨Ø§Ø³ Ùˆ Ú©ÛŒÙ ØªØ£Ø³ÛŒØ³ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù…Ø§ Ù…Ø¹ØªÙ‚Ø¯ÛŒÙ… Ù‡Ø± ÙØ±Ø¯ Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ø¨Ù‡ØªØ±ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø§Ø±Ø¯.</p>
<p>ØªÛŒÙ… Ø·Ø±Ø§Ø­ÛŒ Ù…Ø§ Ø¨Ø§ Ø¨Ù‡Ø±Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† ØªØ±Ù†Ø¯Ù‡Ø§ÛŒ Ù…Ø¯ Ø¬Ù‡Ø§Ù†ÛŒ Ùˆ ØªØ±Ú©ÛŒØ¨ Ø¢Ù† Ø¨Ø§ Ø°ÙˆÙ‚ Ø§ÛŒØ±Ø§Ù†ÛŒØŒ Ù…Ø­ØµÙˆÙ„Ø§ØªÛŒ Ø®Ù„Ù‚ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ù‡Ù… Ø²ÛŒØ¨Ø§ Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ù‡Ù… Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ.</p>
<p>Ù…Ø§ Ø¯Ø± Ù¾Ø´ÙˆØ§Ú© Ø¨Ù‡ Ø±Ø¶Ø§ÛŒØª Ù…Ø´ØªØ±ÛŒ Ø§Ù‡Ù…ÛŒØª ÙˆÛŒÚ˜Ù‡â€ŒØ§ÛŒ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ… Ùˆ Ù‡Ù…ÙˆØ§Ø±Ù‡ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ù†ÛŒØ¯Ù† Ù†Ø¸Ø±Ø§Øª Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø´Ù…Ø§ Ù‡Ø³ØªÛŒÙ….</p>
</div></section>
</div>

<!-- Contact Page -->
<div class="page" id="page-contact">
<section class="section"><div class="container">
<div class="section-title"><h2>ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</h2><p>Ø®ÙˆØ´Ø­Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÛŒÙ… Ù†Ø¸Ø±Ø§Øª Ø´Ù…Ø§ Ø±Ø§ Ø¨Ø´Ù†ÙˆÛŒÙ…</p></div>
<div class="contact-form">
<div class="form-group"><label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label><input type="text" id="contactName" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"></div>
<div class="form-group"><label>Ø§ÛŒÙ…ÛŒÙ„</label><input type="email" id="contactEmail" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"></div>
<div class="form-group"><label>Ù…ÙˆØ¶ÙˆØ¹</label><input type="text" id="contactSubject" placeholder="Ù…ÙˆØ¶ÙˆØ¹ Ù¾ÛŒØ§Ù…"></div>
<div class="form-group"><label>Ù¾ÛŒØ§Ù…</label><textarea id="contactMessage" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea></div>
<button class="form-btn" onclick="submitContact()">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</button>
</div>
</div></section>
</div>

<!-- Admin Page -->
<div class="page" id="page-admin">
<div class="admin-layout">
<aside class="admin-sidebar" id="adminSidebar">
<h2>ğŸ›¡ï¸ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
<nav class="admin-nav">
<button class="active" onclick="showAdminTab('dashboard',this)">ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</button>
<button onclick="showAdminTab('admin-products',this)">ğŸ“¦ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª</button>
<button onclick="showAdminTab('admin-orders',this)">ğŸ›ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙØ§Ø±Ø´Ø§Øª</button>
<button onclick="showAdminTab('admin-discounts',this)">ğŸ« Ú©Ø¯Ù‡Ø§ÛŒ ØªØ®ÙÛŒÙ</button>
<button onclick="showAdminTab('admin-inventory',this)">ğŸ“‹ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§Ù†Ø¨Ø§Ø±</button>
<button onclick="showAdminTab('admin-users',this)">ğŸ‘¥ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</button>
<button onclick="showAdminTab('admin-colors',this)">ğŸ¨ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¸Ø§Ù‡Ø±ÛŒ</button>
<button onclick="showAdminTab('admin-stats',this)">ğŸ“ˆ Ø¢Ù…Ø§Ø± ÙØ±ÙˆØ´</button>
<button onclick="showAdminTab('admin-security',this)">ğŸ”’ Ø§Ù…Ù†ÛŒØª</button>
<button onclick="showAdminTab('admin-reviews',this)">â­ Ù†Ø¸Ø±Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</button>
<button onclick="navigateTo('home')" style="color:var(--accent);margin-top:20px">â†© Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø§ÛŒØª</button>
</nav>
</aside>
<div class="admin-content" id="adminContent"></div>
</div>
</div>
</main>

<footer class="footer" id="mainFooter">
<div class="container">
<div class="footer-grid">
<div><h4>Ù¾Ø´ÙˆØ§Ú©</h4><p style="font-size:14px;line-height:2">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ† Ù„ÙˆÚ©Ø³ Ø¨Ø§ Ø¨Ù‡ØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒØ±Ø§Ù†ÛŒ Ùˆ Ø®Ø§Ø±Ø¬ÛŒ</p></div>
<div><h4>Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹</h4><a href="#" onclick="navigateTo('home')">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a><a href="#" onclick="navigateTo('products')">Ù…Ø­ØµÙˆÙ„Ø§Øª</a><a href="#" onclick="navigateTo('about')">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a><a href="#" onclick="navigateTo('contact')">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a></div>
<div><h4>Ø®Ø¯Ù…Ø§Øª Ù…Ø´ØªØ±ÛŒØ§Ù†</h4><a href="#">Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ÛŒÚ¯Ø§Ù†</a><a href="#">Ú¯Ø§Ø±Ø§Ù†ØªÛŒ Ø§ØµØ§Ù„Øª</a><a href="#">Ø¨Ø§Ø²Ú¯Ø´Øª Ú©Ø§Ù„Ø§</a></div>
<div><h4>Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§</h4><p style="font-size:14px">ğŸ“ ØªÙ„ÙÙ†: Û°Û²Û±-Û±Û²Û³Û´ÛµÛ¶Û·Û¸</p><p style="font-size:14px">ğŸ“§ Ø§ÛŒÙ…ÛŒÙ„: info@poshvak.ir</p><p style="font-size:14px">ğŸ“ ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±</p></div>
</div>
<div class="footer-bottom"><p>Â© Û±Û´Û°Û³ Ù¾Ø´ÙˆØ§Ú© - ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª</p></div>
</div>
</footer>

<script>
// ============ UTILITY ============
function toPersianNum(n){const d='Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹';return String(n).replace(/\d/g,x=>d[x])}
function formatPrice(p){return toPersianNum(p.toLocaleString())+' ØªÙˆÙ…Ø§Ù†'}
function generateId(){return '_'+Math.random().toString(36).substr(2,9)}
function showToast(msg,type='info'){const c=document.getElementById('toastContainer');const t=document.createElement('div');t.className='toast '+type;t.textContent=msg;c.appendChild(t);setTimeout(()=>{t.style.opacity='0';t.style.transform='translateX(-100%)';setTimeout(()=>t.remove(),300)},3000)}
function getStore(k,d=null){try{const v=localStorage.getItem('poshvak_'+k);return v?JSON.parse(v):d}catch(e){return d}}
function setStore(k,v){localStorage.setItem('poshvak_'+k,JSON.stringify(v))}

// ============ PRODUCTS DATA ============
function initProducts(){
if(getStore('products'))return;
const products=[
{id:'s1',name:'Ú©ÙØ´ Ú©Ù„Ø§Ø³ÛŒÚ© Ú†Ø±Ù… Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ú©ÙØ´',price:1850000,oldPrice:2200000,sizes:{36:5,37:3,38:8,39:10,40:12,41:7,42:6,43:4,44:2,45:1},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#222',shortDesc:'Ú©ÙØ´ Ú†Ø±Ù… Ø·Ø¨ÛŒØ¹ÛŒ Ø¨Ø§ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù„Ø§Ø³ÛŒÚ©',longDesc:'Ø§ÛŒÙ† Ú©ÙØ´ Ø§Ø² Ú†Ø±Ù… Ø·Ø¨ÛŒØ¹ÛŒ Ú¯Ø§ÙˆÛŒ Ø¯Ø±Ø¬Ù‡ ÛŒÚ© Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ùˆ Ø¯Ø§Ø±Ø§ÛŒ Ø²ÛŒØ±Ù‡ Ø¶Ø¯ Ù„ØºØ²Ø´ Ùˆ Ú©ÙÛŒ Ø·Ø¨ÛŒ Ø§Ø³Øª. Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø±ÙˆØ²Ù…Ø±Ù‡ Ùˆ Ù…Ø¬Ø§Ù„Ø³ Ø±Ø³Ù…ÛŒ.',img:'https://picsum.photos/seed/shoe1/600/600',rating:4.5,sales:234},
{id:'s2',name:'Ú©ØªÙˆÙ†ÛŒ Ø§Ø³Ù¾Ø±Øª Ù†Ø§ÛŒÚ©',category:'Ú©ÙØ´',price:2450000,oldPrice:2900000,sizes:{37:4,38:6,39:8,40:10,41:9,42:5,43:3,44:0,45:0},color:'Ø³ÙÛŒØ¯',colorHex:'#f5f5f5',shortDesc:'Ú©ØªÙˆÙ†ÛŒ Ø§Ø³Ù¾Ø±Øª Ø³Ø¨Ú© Ùˆ Ø±Ø§Ø­Øª',longDesc:'Ú©ØªÙˆÙ†ÛŒ Ø§Ø³Ù¾Ø±Øª Ø¨Ø§ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ø§ÛŒØ± Ù…Ú©Ø³ØŒ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ø³Ø¨Ú© Ùˆ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ±ÙˆÛŒ Ùˆ ÙˆØ±Ø²Ø´.',img:'https://picsum.photos/seed/shoe2/600/600',rating:4.8,sales:567},
{id:'s3',name:'Ù†ÛŒÙ…â€ŒØ¨ÙˆØª Ø²Ù†Ø§Ù†Ù‡ Ù¾Ø§Ø´Ù†Ù‡â€ŒØ¯Ø§Ø±',category:'Ú©ÙØ´',price:1650000,oldPrice:1900000,sizes:{36:7,37:10,38:8,39:6,40:4,41:2},color:'Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ',colorHex:'#8B4513',shortDesc:'Ù†ÛŒÙ…â€ŒØ¨ÙˆØª Ø´ÛŒÚ© Ùˆ Ù…Ø¬Ù„Ø³ÛŒ',longDesc:'Ù†ÛŒÙ…â€ŒØ¨ÙˆØª Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ Ù¾Ø§Ø´Ù†Ù‡ Û· Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±ÛŒØŒ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø² Ú†Ø±Ù… Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¯Ø±Ø¬Ù‡ ÛŒÚ©.',img:'https://picsum.photos/seed/shoe3/600/600',rating:4.2,sales:189},
{id:'s4',name:'ØµÙ†Ø¯Ù„ ØªØ§Ø¨Ø³ØªØ§Ù†ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ú©ÙØ´',price:890000,oldPrice:1100000,sizes:{39:12,40:15,41:10,42:8,43:5,44:3},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#333',shortDesc:'ØµÙ†Ø¯Ù„ Ø±Ø§Ø­ØªÛŒ ØªØ§Ø¨Ø³ØªØ§Ù†Ù‡',longDesc:'ØµÙ†Ø¯Ù„ Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø¨Ø§ Ø¨Ù†Ø¯ Ú†Ø³Ø¨ÛŒ Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…ØŒ Ø²ÛŒØ±Ù‡ Ù†Ø±Ù… Ùˆ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±.',img:'https://picsum.photos/seed/shoe4/600/600',rating:3.8,sales:145},
{id:'s5',name:'Ú©ÙØ´ Ø±Ø³Ù…ÛŒ Ø²Ù†Ø§Ù†Ù‡ Ù¾Ø§Ø´Ù†Ù‡ Ø¨Ù„Ù†Ø¯',category:'Ú©ÙØ´',price:1980000,oldPrice:2500000,sizes:{36:5,37:8,38:10,39:7,40:3},color:'Ù‚Ø±Ù…Ø²',colorHex:'#c0392b',shortDesc:'Ú©ÙØ´ Ù…Ø¬Ù„Ø³ÛŒ Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ú©ÙØ´ Ù¾Ø§Ø´Ù†Ù‡ Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ Ø·Ø±Ø§Ø­ÛŒ Ø§ÛŒØªØ§Ù„ÛŒØ§ÛŒÛŒØŒ Ù…Ù†Ø§Ø³Ø¨ Ù…Ù‡Ù…Ø§Ù†ÛŒâ€ŒÙ‡Ø§ Ùˆ Ù…Ø±Ø§Ø³Ù… Ø®Ø§Øµ.',img:'https://picsum.photos/seed/shoe5/600/600',rating:4.6,sales:312},
{id:'s6',name:'Ú©ÙØ´ ÙˆØ±Ø²Ø´ÛŒ Ø¯ÙˆÛŒØ¯Ù†',category:'Ú©ÙØ´',price:2100000,oldPrice:2600000,sizes:{38:6,39:8,40:12,41:10,42:7,43:4,44:2},color:'Ø¢Ø¨ÛŒ',colorHex:'#2980b9',shortDesc:'Ú©ÙØ´ Ù…Ø®ØµÙˆØµ Ø¯ÙˆÛŒØ¯Ù† Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ',longDesc:'Ú©ÙØ´ Ø¯ÙˆÛŒØ¯Ù† Ø¨Ø§ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ø¬Ø°Ø¨ Ø¶Ø±Ø¨Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ø±ÙˆÛŒÙ‡ Ù…Ø´ Ø³Ø¨Ú©â€ŒÙˆØ²Ù†.',img:'https://picsum.photos/seed/shoe6/600/600',rating:4.7,sales:423},
{id:'s7',name:'Ù„ÙˆÙØ± Ú†Ø±Ù… Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ú©ÙØ´',price:1750000,oldPrice:2100000,sizes:{39:5,40:8,41:10,42:7,43:4,44:2},color:'Ø¹Ø³Ù„ÛŒ',colorHex:'#b8860b',shortDesc:'Ù„ÙˆÙØ± Ø´ÛŒÚ© Ùˆ Ø±Ø§Ø­Øª',longDesc:'Ù„ÙˆÙØ± Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø§Ø² Ú†Ø±Ù… Ø·Ø¨ÛŒØ¹ÛŒ Ø¨Ø§ Ú©ÙÛŒ ÙÙˆÙ… Ø­Ø§ÙØ¸Ù‡â€ŒØ¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø­ØªÛŒ ØªÙ…Ø§Ù… Ø±ÙˆØ².',img:'https://picsum.photos/seed/shoe7/600/600',rating:4.3,sales:198},
{id:'s8',name:'Ø¨ÙˆØª Ø³Ø§Ù‚Ø¯Ø§Ø± Ø²Ù†Ø§Ù†Ù‡',category:'Ú©ÙØ´',price:2350000,oldPrice:2800000,sizes:{36:4,37:6,38:8,39:5,40:3},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#1a1a1a',shortDesc:'Ø¨ÙˆØª Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ø¨ÙˆØª Ø³Ø§Ù‚Ø¯Ø§Ø± Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ Ø¢Ø³ØªØ± Ø®Ø² Ù…ØµÙ†ÙˆØ¹ÛŒ. Ú¯Ø±Ù… Ùˆ Ø¶Ø¯ Ø¢Ø¨.',img:'https://picsum.photos/seed/shoe8/600/600',rating:4.4,sales:276},
{id:'s9',name:'Ú©ÙØ´ Ø·Ø¨ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ú©ÙØ´',price:1450000,oldPrice:1800000,sizes:{40:10,41:12,42:8,43:6,44:4,45:2},color:'Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ ØªÛŒØ±Ù‡',colorHex:'#5D4037',shortDesc:'Ú©ÙØ´ Ø·Ø¨ÛŒ Ø±ÙˆØ²Ù…Ø±Ù‡',longDesc:'Ú©ÙØ´ Ø·Ø¨ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø¨Ø§ Ú©ÙÛŒ Ø§Ø±ØªÙˆÙ¾Ø¯ÛŒ Ùˆ Ø²ÛŒØ±Ù‡ Ø¶Ø¯ Ù„ØºØ²Ø´. ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ù…ØªØ®ØµØµØ§Ù†.',img:'https://picsum.photos/seed/shoe9/600/600',rating:4.1,sales:167},
{id:'s10',name:'Ø§Ø³Ù†ÛŒÚ©Ø± Ø²Ù†Ø§Ù†Ù‡ Ø³ØªØ§Ø±Ù‡â€ŒØ¯Ø§Ø±',category:'Ú©ÙØ´',price:1550000,oldPrice:1850000,sizes:{36:8,37:10,38:12,39:7,40:5,41:3},color:'ØµÙˆØ±ØªÛŒ',colorHex:'#e91e8c',shortDesc:'Ø§Ø³Ù†ÛŒÚ©Ø± ÙØ§Ù†ØªØ²ÛŒ Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ø§Ø³Ù†ÛŒÚ©Ø± Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ Ø·Ø±Ø­ Ø³ØªØ§Ø±Ù‡ Ùˆ Ù†ÙˆØ§Ø±Ù‡Ø§ÛŒ Ø¨Ø±Ø§Ù‚. Ø³Ø¨Ú© Ùˆ Ø±Ø§Ø­Øª.',img:'https://picsum.photos/seed/shoe10/600/600',rating:4.5,sales:345},
{id:'c1',name:'Ù¾ÛŒØ±Ø§Ù‡Ù† Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø¢Ú©Ø³ÙÙˆØ±Ø¯',category:'Ù„Ø¨Ø§Ø³',price:980000,oldPrice:1200000,sizes:{S:8,M:15,L:20,XL:12,XXL:6},color:'Ø¢Ø¨ÛŒ Ø±ÙˆØ´Ù†',colorHex:'#5dade2',shortDesc:'Ù¾ÛŒØ±Ø§Ù‡Ù† Ø±Ø³Ù…ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡',longDesc:'Ù¾ÛŒØ±Ø§Ù‡Ù† Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø§Ø² Ù¾Ø§Ø±Ú†Ù‡ Ø¢Ú©Ø³ÙÙˆØ±Ø¯ Ù†Ø® Ù¾Ù†Ø¨Ù‡ØŒ Ø¯ÙˆØ®Øª ØªÙ…ÛŒØ² Ùˆ ÛŒÙ‚Ù‡ Ú©Ù„Ø§Ø³ÛŒÚ©.',img:'https://picsum.photos/seed/cloth1/600/600',rating:4.3,sales:456},
{id:'c2',name:'Ù…Ø§Ù†ØªÙˆ Ø²Ù†Ø§Ù†Ù‡ Ø¨Ù„Ù†Ø¯',category:'Ù„Ø¨Ø§Ø³',price:1850000,oldPrice:2300000,sizes:{S:5,M:10,L:12,XL:8,XXL:4},color:'Ú©Ø±Ù…',colorHex:'#F5E6CC',shortDesc:'Ù…Ø§Ù†ØªÙˆ Ø¨Ù„Ù†Ø¯ Ø´ÛŒÚ© Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ù…Ø§Ù†ØªÙˆ Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ Ø·Ø±Ø§Ø­ÛŒ Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„ Ùˆ Ø¬Ù†Ø³ Ú©Ø±Ù¾ Ø¯Ø±Ø¬Ù‡ ÛŒÚ©.',img:'https://picsum.photos/seed/cloth2/600/600',rating:4.7,sales:389},
{id:'c3',name:'ØªÛŒâ€ŒØ´Ø±Øª Ø§ÙˆØ±Ø³Ø§ÛŒØ² Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ù„Ø¨Ø§Ø³',price:450000,oldPrice:600000,sizes:{S:20,M:25,L:30,XL:15,XXL:8},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#222',shortDesc:'ØªÛŒâ€ŒØ´Ø±Øª Ø±Ø§Ø­Øª Ùˆ Ø´ÛŒÚ©',longDesc:'ØªÛŒâ€ŒØ´Ø±Øª Ø§ÙˆØ±Ø³Ø§ÛŒØ² Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø§Ø² Ù†Ø® Ù¾Ù†Ø¨Ù‡ Û±Û°Û°ÙªØŒ Ù†Ø±Ù… Ùˆ Ø³Ø¨Ú©.',img:'https://picsum.photos/seed/cloth3/600/600',rating:4.1,sales:678},
{id:'c4',name:'Ø´Ù„ÙˆØ§Ø± Ø¬ÛŒÙ† Ø²Ù†Ø§Ù†Ù‡',category:'Ù„Ø¨Ø§Ø³',price:1250000,oldPrice:1500000,sizes:{S:10,M:15,L:12,XL:8},color:'Ø¢Ø¨ÛŒ',colorHex:'#4169E1',shortDesc:'Ø´Ù„ÙˆØ§Ø± Ø¬ÛŒÙ† ÙØ§Ù‚ Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ø´Ù„ÙˆØ§Ø± Ø¬ÛŒÙ† Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ ÙØ§Ù‚ Ø¨Ù„Ù†Ø¯ Ùˆ Ù¾Ø§Ú†Ù‡ Ú¯Ø´Ø§Ø¯. Ø¬Ù†Ø³ Ø¯Ù†ÛŒÙ… Ú©Ø´ÛŒ Ùˆ Ø±Ø§Ø­Øª.',img:'https://picsum.photos/seed/cloth4/600/600',rating:4.5,sales:534},
{id:'c5',name:'Ú©Øª ØªÚ© Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ù„Ø¨Ø§Ø³',price:2800000,oldPrice:3500000,sizes:{S:4,M:8,L:10,XL:6,XXL:3},color:'Ø³Ø±Ù…Ù‡â€ŒØ§ÛŒ',colorHex:'#1B2631',shortDesc:'Ú©Øª ØªÚ© Ø±Ø³Ù…ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡',longDesc:'Ú©Øª ØªÚ© Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø§Ø² Ù¾Ø§Ø±Ú†Ù‡ ÙØ§Ø³ØªÙˆÙ†ÛŒ Ø¯Ø±Ø¬Ù‡ ÛŒÚ© Ø¨Ø§ Ø¢Ø³ØªØ±ÛŒ Ø³Ø§ØªÙ†.',img:'https://picsum.photos/seed/cloth5/600/600',rating:4.8,sales:201},
{id:'c6',name:'Ù¾Ù„ÛŒÙˆØ± Ø¨Ø§ÙØª Ø²Ù†Ø§Ù†Ù‡',category:'Ù„Ø¨Ø§Ø³',price:750000,oldPrice:950000,sizes:{S:12,M:18,L:15,XL:8},color:'ØµÙˆØ±ØªÛŒ',colorHex:'#FFB6C1',shortDesc:'Ù¾Ù„ÛŒÙˆØ± Ú¯Ø±Ù… Ùˆ Ù†Ø±Ù…',longDesc:'Ù¾Ù„ÛŒÙˆØ± Ø¨Ø§ÙØª Ø²Ù†Ø§Ù†Ù‡ Ø§Ø² Ù†Ø® Ø¢Ú©Ø±ÛŒÙ„ÛŒÚ© Ø¶Ø¯ Ø­Ø³Ø§Ø³ÛŒØª. Ø¨Ø³ÛŒØ§Ø± Ú¯Ø±Ù….',img:'https://picsum.photos/seed/cloth6/600/600',rating:4.2,sales:367},
{id:'c7',name:'Ø´Ù„ÙˆØ§Ø± Ú©ØªØ§Ù† Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ù„Ø¨Ø§Ø³',price:890000,oldPrice:1100000,sizes:{S:8,M:14,L:18,XL:10,XXL:5},color:'Ø®Ø§Ú©ÛŒ',colorHex:'#C4A882',shortDesc:'Ø´Ù„ÙˆØ§Ø± Ú©ØªØ§Ù† Ø±Ø§Ø³ØªÙ‡',longDesc:'Ø´Ù„ÙˆØ§Ø± Ú©ØªØ§Ù† Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø¨Ø§ ÙØ§Ù‚ Ù…ØªÙˆØ³Ø· Ùˆ Ù¾Ø§Ú†Ù‡ Ø±Ø§Ø³ØªÙ‡. Ø¬Ù†Ø³ Ú©ØªØ§Ù† Ù†Ø±Ù… Ùˆ Ù…Ù‚Ø§ÙˆÙ….',img:'https://picsum.photos/seed/cloth7/600/600',rating:4.0,sales:289},
{id:'c8',name:'Ù¾Ø§Ù„ØªÙˆ Ø²Ù†Ø§Ù†Ù‡ Ø²Ù…Ø³ØªØ§Ù†ÛŒ',category:'Ù„Ø¨Ø§Ø³',price:3200000,oldPrice:3900000,sizes:{S:3,M:6,L:8,XL:4},color:'Ø´ØªØ±ÛŒ',colorHex:'#C19A6B',shortDesc:'Ù¾Ø§Ù„ØªÙˆ Ø¨Ù„Ù†Ø¯ Ø²Ù…Ø³ØªØ§Ù†ÛŒ',longDesc:'Ù¾Ø§Ù„ØªÙˆ Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡ Ø§Ø² Ù¾Ø§Ø±Ú†Ù‡ ÙÙˆØªØ± Ø¶Ø®ÛŒÙ… Ø¨Ø§ Ø¢Ø³ØªØ± Ù…Ø®Ù…Ù„.',img:'https://picsum.photos/seed/cloth8/600/600',rating:4.9,sales:178},
{id:'c9',name:'Ù‡ÙˆØ¯ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ù„Ø¨Ø§Ø³',price:680000,oldPrice:850000,sizes:{S:10,M:20,L:25,XL:15,XXL:8},color:'Ø·ÙˆØ³ÛŒ',colorHex:'#808080',shortDesc:'Ù‡ÙˆØ¯ÛŒ Ú©Ù„Ø§Ù‡â€ŒØ¯Ø§Ø± Ù…Ø±Ø¯Ø§Ù†Ù‡',longDesc:'Ù‡ÙˆØ¯ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø§Ø² Ø¬Ù†Ø³ ÙÙˆØªØ± Ø³Ù‡â€ŒÙ†Ø® Ø¨Ø§ Ú©Ù„Ø§Ù‡ Ø¯ÙˆØ¨Ù„ Ùˆ Ø¬ÛŒØ¨ Ø¬Ù„Ùˆ.',img:'https://picsum.photos/seed/cloth9/600/600',rating:4.4,sales:512},
{id:'c10',name:'Ù„Ø¨Ø§Ø³ Ù…Ø¬Ù„Ø³ÛŒ Ø²Ù†Ø§Ù†Ù‡',category:'Ù„Ø¨Ø§Ø³',price:3500000,oldPrice:4200000,sizes:{S:3,M:5,L:7,XL:4},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#0a0a0a',shortDesc:'Ù„Ø¨Ø§Ø³ Ù…Ø¬Ù„Ø³ÛŒ Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ù„Ø¨Ø§Ø³ Ù…Ø¬Ù„Ø³ÛŒ Ø¨Ù„Ù†Ø¯ Ø²Ù†Ø§Ù†Ù‡ Ø§Ø² Ø¬Ù†Ø³ Ø³Ø§ØªÙ† Ùˆ ØªÙˆØ±. Ø¯Ø§Ø±Ø§ÛŒ Ø³Ù†Ú¯â€ŒÚ©Ø§Ø±ÛŒ Ø¯Ø³ØªÛŒ.',img:'https://picsum.photos/seed/cloth10/600/600',rating:4.9,sales:145},
{id:'b1',name:'Ú©ÛŒÙ Ø¯Ø³ØªÛŒ Ú†Ø±Ù… Ø²Ù†Ø§Ù†Ù‡',category:'Ú©ÛŒÙ',price:2200000,oldPrice:2700000,sizes:{'Ú©ÙˆÚ†Ú©':5,'Ù…ØªÙˆØ³Ø·':10,'Ø¨Ø²Ø±Ú¯':7},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#1a1a1a',shortDesc:'Ú©ÛŒÙ Ø¯Ø³ØªÛŒ Ù„ÙˆÚ©Ø³ Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ú©ÛŒÙ Ø¯Ø³ØªÛŒ Ø²Ù†Ø§Ù†Ù‡ Ø§Ø² Ú†Ø±Ù… Ø·Ø¨ÛŒØ¹ÛŒ Ú¯Ø§ÙˆÛŒ Ø¨Ø§ Ø¯ÙˆØ®Øª Ø¯Ø³ØªÛŒ.',img:'https://picsum.photos/seed/bag1/600/600',rating:4.6,sales:234},
{id:'b2',name:'Ú©ÙˆÙ„Ù‡â€ŒÙ¾Ø´ØªÛŒ Ú†Ø±Ù… Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ú©ÛŒÙ',price:1850000,oldPrice:2200000,sizes:{'Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯':15},color:'Ù‚Ù‡ÙˆÙ‡â€ŒØ§ÛŒ',colorHex:'#6F4E37',shortDesc:'Ú©ÙˆÙ„Ù‡â€ŒÙ¾Ø´ØªÛŒ Ø±ÙˆØ²Ù…Ø±Ù‡',longDesc:'Ú©ÙˆÙ„Ù‡â€ŒÙ¾Ø´ØªÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø§Ø² Ú†Ø±Ù… Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¯Ø±Ø¬Ù‡ ÛŒÚ© Ø¨Ø§ Ù…Ø­ÙØ¸Ù‡ Ù„Ù¾â€ŒØªØ§Ù¾.',img:'https://picsum.photos/seed/bag2/600/600',rating:4.3,sales:345},
{id:'b3',name:'Ú©ÛŒÙ Ø±ÙˆØ¯ÙˆØ´ÛŒ Ø²Ù†Ø§Ù†Ù‡',category:'Ú©ÛŒÙ',price:950000,oldPrice:1200000,sizes:{'Ú©ÙˆÚ†Ú©':12,'Ù…ØªÙˆØ³Ø·':8},color:'Ù‚Ø±Ù…Ø²',colorHex:'#E74C3C',shortDesc:'Ú©ÛŒÙ Ø±ÙˆØ¯ÙˆØ´ÛŒ Ø´ÛŒÚ©',longDesc:'Ú©ÛŒÙ Ø±ÙˆØ¯ÙˆØ´ÛŒ Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ Ø¨Ù†Ø¯ Ø²Ù†Ø¬ÛŒØ±ÛŒ Ø·Ù„Ø§ÛŒÛŒ. Ù…Ù†Ø§Ø³Ø¨ Ù…Ù‡Ù…Ø§Ù†ÛŒ.',img:'https://picsum.photos/seed/bag3/600/600',rating:4.4,sales:456},
{id:'b4',name:'Ú©ÛŒÙ Ù„Ù¾â€ŒØªØ§Ù¾',category:'Ú©ÛŒÙ',price:1350000,oldPrice:1600000,sizes:{'Û±Û³ Ø§ÛŒÙ†Ú†':8,'Û±Ûµ Ø§ÛŒÙ†Ú†':12,'Û±Û· Ø§ÛŒÙ†Ú†':6},color:'Ø³Ø±Ù…Ù‡â€ŒØ§ÛŒ',colorHex:'#2C3E50',shortDesc:'Ú©ÛŒÙ Ù…Ø­Ø§ÙØ¸ Ù„Ù¾â€ŒØªØ§Ù¾',longDesc:'Ú©ÛŒÙ Ù„Ù¾â€ŒØªØ§Ù¾ Ø¶Ø¯ Ø¶Ø±Ø¨Ù‡ Ø¨Ø§ Ø¢Ø³ØªØ± Ù†Ø±Ù… Ø¯Ø§Ø®Ù„ÛŒ.',img:'https://picsum.photos/seed/bag4/600/600',rating:4.2,sales:289},
{id:'b5',name:'Ú©ÛŒÙ Ø¯ÙˆØ´ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡',category:'Ú©ÛŒÙ',price:780000,oldPrice:950000,sizes:{'Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯':20},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#2d2d2d',shortDesc:'Ú©ÛŒÙ Ø¯ÙˆØ´ÛŒ Ú©Ú˜ÙˆØ§Ù„',longDesc:'Ú©ÛŒÙ Ø¯ÙˆØ´ÛŒ Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø§Ø² Ø¬Ù†Ø³ Ø¨Ø±Ø²Ù†Øª Ø¶Ø¯ Ø¢Ø¨. Ø³Ø¨Ú© Ùˆ Ù…Ù‚Ø§ÙˆÙ….',img:'https://picsum.photos/seed/bag5/600/600',rating:3.9,sales:178},
{id:'b6',name:'Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø²Ù†Ø§Ù†Ù‡',category:'Ú©ÛŒÙ',price:580000,oldPrice:750000,sizes:{'Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯':25},color:'ØµÙˆØ±ØªÛŒ',colorHex:'#FF69B4',shortDesc:'Ú©ÛŒÙ Ù¾ÙˆÙ„ Ú†Ø±Ù…ÛŒ Ø²Ù†Ø§Ù†Ù‡',longDesc:'Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø²Ù†Ø§Ù†Ù‡ Ø§Ø² Ú†Ø±Ù… Ø·Ø¨ÛŒØ¹ÛŒ Ø¨Ø² Ø¨Ø§ Ø¬Ø§Ú©Ø§Ø±ØªÛŒ Ù…ØªØ¹Ø¯Ø¯.',img:'https://picsum.photos/seed/bag6/600/600',rating:4.5,sales:567},
{id:'b7',name:'Ø³Ø§Ú© ÙˆØ±Ø²Ø´ÛŒ',category:'Ú©ÛŒÙ',price:1100000,oldPrice:1400000,sizes:{'Ù…ØªÙˆØ³Ø·':10,'Ø¨Ø²Ø±Ú¯':8},color:'Ù…Ø´Ú©ÛŒ-Ù‚Ø±Ù…Ø²',colorHex:'#c0392b',shortDesc:'Ø³Ø§Ú© ÙˆØ±Ø²Ø´ÛŒ Ú†Ù†Ø¯Ú©Ø§Ø±Ù‡',longDesc:'Ø³Ø§Ú© ÙˆØ±Ø²Ø´ÛŒ Ø¨Ø§ Ù…Ø­ÙØ¸Ù‡ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ú©ÙØ´ Ùˆ Ù„ÙˆØ§Ø²Ù… Ø®ÛŒØ³.',img:'https://picsum.photos/seed/bag7/600/600',rating:4.1,sales:234},
{id:'b8',name:'Ú©ÛŒÙ Ø³ÙØ±ÛŒ',category:'Ú©ÛŒÙ',price:2650000,oldPrice:3200000,sizes:{'Ù…ØªÙˆØ³Ø·':6,'Ø¨Ø²Ø±Ú¯':4},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#1c1c1c',shortDesc:'Ú©ÛŒÙ Ø³ÙØ±ÛŒ Ú†Ø±Ø®â€ŒØ¯Ø§Ø±',longDesc:'Ú©ÛŒÙ Ø³ÙØ±ÛŒ Ú†Ø±Ø®â€ŒØ¯Ø§Ø± Ø¨Ø§ Ø¨Ø¯Ù†Ù‡ Ø³Ø®Øª Ùˆ Ù…Ù‚Ø§ÙˆÙ…. Ø¯Ø§Ø±Ø§ÛŒ Ù‚ÙÙ„ Ø±Ù…Ø²ÛŒ TSA.',img:'https://picsum.photos/seed/bag8/600/600',rating:4.7,sales:156},
{id:'b9',name:'Ú©ÛŒÙ Ú©Ù…Ø±ÛŒ',category:'Ú©ÛŒÙ',price:450000,oldPrice:600000,sizes:{'Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯':30},color:'Ù…Ø´Ú©ÛŒ',colorHex:'#333',shortDesc:'Ú©ÛŒÙ Ú©Ù…Ø±ÛŒ Ø§Ø³Ù¾Ø±Øª',longDesc:'Ú©ÛŒÙ Ú©Ù…Ø±ÛŒ Ø§Ø³Ù¾Ø±Øª Ùˆ Ø³Ø¨Ú©. Ù…Ù†Ø§Ø³Ø¨ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ±ÙˆÛŒ Ùˆ Ø³ÙØ±.',img:'https://picsum.photos/seed/bag9/600/600',rating:3.8,sales:423},
{id:'b10',name:'Ú©ÛŒÙ Ù…Ø¬Ù„Ø³ÛŒ Ø²Ù†Ø§Ù†Ù‡ Ú©Ù„Ø§Ú†',category:'Ú©ÛŒÙ',price:1200000,oldPrice:1500000,sizes:{'Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯':15},color:'Ø·Ù„Ø§ÛŒÛŒ',colorHex:'#FFD700',shortDesc:'Ú©ÛŒÙ Ù…Ø¬Ù„Ø³ÛŒ Ù„ÙˆÚ©Ø³',longDesc:'Ú©ÛŒÙ Ú©Ù„Ø§Ú† Ù…Ø¬Ù„Ø³ÛŒ Ø²Ù†Ø§Ù†Ù‡ Ø¨Ø§ Ø³Ù†Ú¯â€ŒÚ©Ø§Ø±ÛŒ Ùˆ Ø²Ù†Ø¬ÛŒØ± Ø·Ù„Ø§ÛŒÛŒ.',img:'https://picsum.photos/seed/bag10/600/600',rating:4.6,sales:298}
];
setStore('products',products);
}

function initDiscounts(){
if(getStore('discounts'))return;
setStore('discounts',[
{id:'d1',code:'WELCOME10',percent:10,expiry:'2025-12-31',usageLimit:100,usedCount:0,active:true},
{id:'d2',code:'SUMMER20',percent:20,expiry:'2025-09-30',usageLimit:50,usedCount:0,active:true},
{id:'d3',code:'VIP30',percent:30,expiry:'2025-06-30',usageLimit:20,usedCount:0,active:false}
]);
}

function initData(){
initProducts();initDiscounts();
if(!getStore('users'))setStore('users',[]);
if(!getStore('orders'))setStore('orders',[]);
if(!getStore('reviews'))setStore('reviews',[]);
if(!getStore('adminColors'))setStore('adminColors',{primary:'#1a1a2e',gold:'#d4a574',accent:'#e94560',btnPrimary:'#1a1a2e',bg:'#fafafa',catShoe:'#667eea',catCloth:'#f093fb',catBag:'#4facfe'});
if(!getStore('securityLog'))setStore('securityLog',[]);
if(!getStore('admin2fa'))setStore('admin2fa',{enabled:true});
}

// ============ APPLY CUSTOM COLORS ============
function applyCustomColors(){
const c=getStore('adminColors');
if(!c)return;
const r=document.documentElement;
if(c.primary)r.style.setProperty('--primary',c.primary);
if(c.gold)r.style.setProperty('--gold',c.gold);
if(c.accent)r.style.setProperty('--accent',c.accent);
if(c.btnPrimary){r.style.setProperty('--btn-primary',c.btnPrimary);r.style.setProperty('--btn-primary-text','#fff')}
if(c.bg)r.style.setProperty('--bg',c.bg);
if(c.catShoe)r.style.setProperty('--cat-shoe',c.catShoe);
if(c.catCloth)r.style.setProperty('--cat-cloth',c.catCloth);
if(c.catBag)r.style.setProperty('--cat-bag',c.catBag);
}

// ============ AUTH ============
let currentUser=getStore('currentUser',null);
let twoFACode='';let twoFATimer=null;

function openAuthModal(){document.getElementById('authModal').classList.add('active');showLogin()}
function closeAuthModal(){document.getElementById('authModal').classList.remove('active');if(twoFATimer)clearInterval(twoFATimer)}
function showLogin(){document.getElementById('loginForm').style.display='block';document.getElementById('registerForm').style.display='none';document.getElementById('twofaForm').style.display='none'}
function showRegister(){document.getElementById('loginForm').style.display='none';document.getElementById('registerForm').style.display='block';document.getElementById('twofaForm').style.display='none'}

function login(){
const u=document.getElementById('loginUsername').value.trim();
const p=document.getElementById('loginPassword').value.trim();
if(!u||!p){showToast('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯','error');return}
if(u==='admin'&&p==='Poshvak@1403'){
const settings=getStore('admin2fa',{enabled:true});
if(settings.enabled){
startTwoFA();
return;
}
completeAdminLogin();
return;
}
const users=getStore('users',[]);
const user=users.find(x=>x.username===u&&x.password===p);
if(user){
currentUser={username:user.username,name:user.name,email:user.email,isAdmin:false};
setStore('currentUser',currentUser);closeAuthModal();updateUI();
logSecurity('ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±: '+user.username);
showToast('Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ '+user.name+'!','success');
}else{
logSecurity('ØªÙ„Ø§Ø´ Ù†Ø§Ù…ÙˆÙÙ‚ ÙˆØ±ÙˆØ¯: '+u);
showToast('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª','error');
}
}

function startTwoFA(){
twoFACode=String(Math.floor(100000+Math.random()*900000));
document.getElementById('loginForm').style.display='none';
document.getElementById('twofaForm').style.display='block';
document.getElementById('twofaDisplay').textContent=twoFACode;
let inp='';for(let i=0;i<6;i++)inp+='<input type="text" maxlength="1" oninput="twoFANext(this,'+i+')" onkeydown="twoFABack(event,this,'+i+')">';
document.getElementById('twofaInputs').innerHTML=inp;
document.getElementById('twofaInputs').children[0].focus();
let sec=120;
const timerEl=document.getElementById('twofaTimer');
if(twoFATimer)clearInterval(twoFATimer);
twoFATimer=setInterval(()=>{
sec--;
const m=Math.floor(sec/60);const s=sec%60;
timerEl.textContent='Ø§Ø¹ØªØ¨Ø§Ø± Ú©Ø¯: '+toPersianNum(m)+':'+toPersianNum(s<10?'0'+s:s);
if(sec<=0){clearInterval(twoFATimer);timerEl.textContent='Ú©Ø¯ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯';twoFACode=''}
},1000);
logSecurity('Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ');
}

function twoFANext(el,i){
if(el.value.length===1){const inputs=document.getElementById('twofaInputs').children;if(i<5)inputs[i+1].focus()}
}
function twoFABack(e,el,i){
if(e.key==='Backspace'&&el.value===''&&i>0){document.getElementById('twofaInputs').children[i-1].focus()}
}

function verifyTwoFA(){
const inputs=document.getElementById('twofaInputs').children;
let code='';for(let i=0;i<6;i++)code+=inputs[i].value;
if(code===twoFACode){
completeAdminLogin();
logSecurity('Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ Ù…ÙˆÙÙ‚');
}else{
showToast('Ú©Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª','error');
logSecurity('ØªÙ„Ø§Ø´ Ù†Ø§Ù…ÙˆÙÙ‚ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ');
}
}

function completeAdminLogin(){
currentUser={username:'admin',name:'Ù…Ø¯ÛŒØ± Ø³Ø§ÛŒØª',email:'admin@poshvak.ir',isAdmin:true};
setStore('currentUser',currentUser);closeAuthModal();updateUI();
if(twoFATimer)clearInterval(twoFATimer);
showToast('Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ Ù…Ø¯ÛŒØ±! ğŸ›¡ï¸','success');
}

function register(){
const name=document.getElementById('regName').value.trim();
const u=document.getElementById('regUsername').value.trim();
const e=document.getElementById('regEmail').value.trim();
const p=document.getElementById('regPassword').value.trim();
if(!name||!u||!e||!p){showToast('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯','error');return}
if(p.length<6){showToast('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯','error');return}
if(!e.includes('@')){showToast('Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error');return}
const users=getStore('users',[]);
if(users.find(x=>x.username===u)){showToast('Ø§ÛŒÙ† Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡','error');return}
users.push({username:u,name,email:e,password:p,createdAt:new Date().toISOString()});
setStore('users',users);
currentUser={username:u,name,email:e,isAdmin:false};
setStore('currentUser',currentUser);closeAuthModal();updateUI();
showToast('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!','success');
}

function logout(){currentUser=null;localStorage.removeItem('poshvak_currentUser');updateUI();navigateTo('home');showToast('Ø§Ø² Ø­Ø³Ø§Ø¨ Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯','info')}
function handleUserBtn(){if(currentUser){if(confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø² Ø­Ø³Ø§Ø¨ Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ'))logout()}else openAuthModal()}
function requireAuth(){if(!currentUser){showToast('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø´ÙˆÛŒØ¯','error');openAuthModal();return false}return true}

// ============ SECURITY LOG ============
function logSecurity(msg){
const log=getStore('securityLog',[]);
log.unshift({msg,date:new Date().toISOString()});
if(log.length>50)log.length=50;
setStore('securityLog',log);
}

// ============ NAVIGATION ============
function navigateTo(page,data=null){
document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
const el=document.getElementById('page-'+page);
if(el){el.classList.add('active');window.scrollTo({top:0,behavior:'smooth'})}
const hdr=document.getElementById('mainHeader');const ftr=document.getElementById('mainFooter');
if(page==='admin'){hdr.style.display='none';ftr.style.display='none'}else{hdr.style.display='';ftr.style.display=''}
if(page==='home')renderHome();
else if(page==='products')renderProducts();
else if(page==='product')renderSingleProduct(data);
else if(page==='cart')renderCart();
else if(page==='favorites')renderFavorites();
else if(page==='admin'){if(currentUser&&currentUser.isAdmin)renderAdmin();else{showToast('Ø¯Ø³ØªØ±Ø³ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø²','error');navigateTo('home')}}
document.getElementById('mainNav').classList.remove('mobile-open');
}
function toggleMobileMenu(){document.getElementById('mainNav').classList.toggle('mobile-open')}

// ============ STARS ============
function renderStars(r){let s='';for(let i=1;i<=5;i++)s+=i<=Math.floor(r)?'â˜…':'â˜†';return s}

// ============ LIVE STATS ============
function renderLiveStats(){
const products=getStore('products',[]);
const orders=getStore('orders',[]);
const users=getStore('users',[]);
const totalSold=products.reduce((s,p)=>s+p.sales,0);
const pending=orders.filter(o=>o.status==='pending').length;
document.getElementById('liveStatsBar').innerHTML=`
<div class="live-stat"><span class="stat-number">${toPersianNum(totalSold)}</span><span class="stat-text">Ù…Ø­ØµÙˆÙ„ ÙØ±ÙˆØ®ØªÙ‡ Ø´Ø¯Ù‡</span></div>
<div class="live-stat"><span class="stat-number">${toPersianNum(users.length)}</span><span class="stat-text">Ú©Ø§Ø±Ø¨Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø´Ø¯Ù‡</span></div>
<div class="live-stat"><span class="stat-number">${toPersianNum(pending)}</span><span class="stat-text">Ø³ÙØ§Ø±Ø´ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´</span></div>
<div class="live-stat"><span class="stat-number">${toPersianNum(products.length)}</span><span class="stat-text">Ù…Ø­ØµÙˆÙ„ ÙØ¹Ø§Ù„</span></div>`;
}

// ============ PRODUCT CARD ============
function productCardHTML(p,i){
const disc=Math.round((1-p.price/p.oldPrice)*100);
const favs=getStore('favorites_'+(currentUser?currentUser.username:''),[]);
const isFav=favs.includes(p.id);
const reviews=getStore('reviews',[]).filter(r=>r.productId===p.id);
const avgR=reviews.length?reviews.reduce((s,r)=>s+r.rating,0)/reviews.length:p.rating;
return`<div class="product-card" style="animation-delay:${(i||0)*0.05}s">
<div class="product-card-img">
<img src="${p.img}" alt="${p.name}" loading="lazy" onerror="this.src='https://picsum.photos/seed/${p.id}/600/600'">
${disc>0?`<span class="product-discount-badge">${toPersianNum(disc)}Ùª</span>`:''}
<button class="product-fav-btn ${isFav?'active':''}" onclick="event.stopPropagation();toggleFav('${p.id}')">${isFav?'â™¥':'â™¡'}</button>
</div>
<div class="product-card-body" onclick="navigateTo('product','${p.id}')" style="cursor:pointer">
<div class="product-card-cat">${p.category}</div>
<div class="product-card-title">${p.name}</div>
<div class="product-card-rating">${renderStars(avgR)} <span style="color:#999;margin-right:4px;font-size:12px">(${toPersianNum(avgR.toFixed(1))})</span></div>
<div class="product-card-price"><span class="price-current">${formatPrice(p.price)}</span>${p.oldPrice>p.price?`<span class="price-old">${formatPrice(p.oldPrice)}</span>`:''}</div>
<div class="product-card-footer">
<button class="add-cart-btn" onclick="event.stopPropagation();quickAddCart('${p.id}')">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯</button>
<span class="product-sales">${toPersianNum(p.sales)} ÙØ±ÙˆØ´</span>
</div></div></div>`}

// ============ HOME ============
function renderHome(){
renderLiveStats();
const products=getStore('products',[]);
document.getElementById('featuredProducts').innerHTML=products.slice().sort(()=>Math.random()-.5).slice(0,8).map((p,i)=>productCardHTML(p,i)).join('');
document.getElementById('bestSellers').innerHTML=products.slice().sort((a,b)=>b.sales-a.sales).slice(0,8).map((p,i)=>productCardHTML(p,i)).join('');
}

// ============ PRODUCTS ============
function renderProducts(){filterProducts()}
function filterProducts(){
let products=getStore('products',[]);
const search=document.getElementById('searchInput').value.trim();
const cat=document.getElementById('categoryFilter').value;
const sort=document.getElementById('sortFilter').value;
const maxPrice=parseInt(document.getElementById('maxPriceFilter').value)||Infinity;
if(search)products=products.filter(p=>p.name.includes(search)||p.shortDesc.includes(search));
if(cat)products=products.filter(p=>p.category===cat);
products=products.filter(p=>p.price<=maxPrice);
if(sort==='price-asc')products.sort((a,b)=>a.price-b.price);
else if(sort==='price-desc')products.sort((a,b)=>b.price-a.price);
else if(sort==='popular')products.sort((a,b)=>b.sales-a.sales);
else if(sort==='rating')products.sort((a,b)=>b.rating-a.rating);
const el=document.getElementById('allProducts');
el.innerHTML=products.length===0?'<div class="empty-state"><div class="empty-icon">ğŸ”</div><p>Ù…Ø­ØµÙˆÙ„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</p></div>':products.map((p,i)=>productCardHTML(p,i)).join('');
}
function filterByCategory(cat){navigateTo('products');setTimeout(()=>{document.getElementById('categoryFilter').value=cat;filterProducts()},100)}

// ============ REVIEWS ============
function getProductReviews(pid){return getStore('reviews',[]).filter(r=>r.productId===pid)}
function renderReviewsSection(pid){
const reviews=getProductReviews(pid);
const avg=reviews.length?reviews.reduce((s,r)=>s+r.rating,0)/reviews.length:0;
return`<div class="reviews-section">
<h3>â­ Ù†Ø¸Ø±Ø§Øª Ùˆ Ø§Ù…ØªÛŒØ§Ø²Ø§Øª (${toPersianNum(reviews.length)})</h3>
${reviews.length>0?`<div class="review-avg">
<div class="review-avg-num">${toPersianNum(avg.toFixed(1))}</div>
<div><div class="review-avg-stars">${renderStars(avg)}</div><div class="review-avg-count">Ø§Ø² ${toPersianNum(reviews.length)} Ù†Ø¸Ø±</div></div>
</div>`:''}
${currentUser?`<div class="review-form">
<h4>Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯:</h4>
<div class="star-rating-input" id="starInput">${[1,2,3,4,5].map(i=>`<span onclick="setReviewStar(${i})" data-star="${i}">â˜†</span>`).join('')}</div>
<textarea class="review-textarea" id="reviewText" placeholder="Ù†Ø¸Ø± Ø´Ù…Ø§ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„..."></textarea>
<button class="review-submit" onclick="submitReview('${pid}')">Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±</button>
</div>`:'<p style="color:var(--text-light);margin-bottom:16px;font-size:14px">Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù†Ø¸Ø± Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´ÙˆÛŒØ¯.</p>'}
<div class="reviews-sort">
<label>Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ:</label>
<select onchange="sortAndRenderReviews('${pid}',this.value)">
<option value="date-desc">Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†</option>
<option value="date-asc">Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±ÛŒÙ†</option>
<option value="rating-desc">Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</option>
<option value="rating-asc">Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</option>
</select>
</div>
<div id="reviewsList">${renderReviewsList(reviews)}</div>
</div>`}

let currentReviewRating=0;
function setReviewStar(n){
currentReviewRating=n;
document.querySelectorAll('#starInput span').forEach((s,i)=>{s.textContent=i<n?'â˜…':'â˜†';s.classList.toggle('active',i<n)});
}

function submitReview(pid){
if(!currentUser){showToast('Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯','error');return}
if(!currentReviewRating){showToast('Ù„Ø·ÙØ§Ù‹ Ø§Ù…ØªÛŒØ§Ø² Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯','error');return}
const text=document.getElementById('reviewText').value.trim();
if(!text){showToast('Ù„Ø·ÙØ§Ù‹ Ù…ØªÙ† Ù†Ø¸Ø± Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯','error');return}
const reviews=getStore('reviews',[]);
reviews.push({id:generateId(),productId:pid,user:currentUser.name,username:currentUser.username,rating:currentReviewRating,text,date:new Date().toISOString()});
setStore('reviews',reviews);
// Update product avg rating
const pReviews=reviews.filter(r=>r.productId===pid);
const avg=pReviews.reduce((s,r)=>s+r.rating,0)/pReviews.length;
const products=getStore('products',[]);
const p=products.find(x=>x.id===pid);
if(p){p.rating=Math.round(avg*10)/10;setStore('products',products)}
currentReviewRating=0;
showToast('Ù†Ø¸Ø± Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯! â­','success');
renderSingleProduct(pid);
}

function renderReviewsList(reviews){
if(reviews.length===0)return'<p style="color:#999;text-align:center;padding:20px">Ù‡Ù†ÙˆØ² Ù†Ø¸Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>';
return reviews.map(r=>`<div class="review-card">
<div class="review-header"><span class="review-user">ğŸ‘¤ ${r.user}</span><span class="review-date">${new Date(r.date).toLocaleDateString('fa-IR')}</span></div>
<div class="review-stars">${renderStars(r.rating)}</div>
<p class="review-text">${r.text}</p>
</div>`).join('')}

function sortAndRenderReviews(pid,sort){
let reviews=getProductReviews(pid);
if(sort==='date-desc')reviews.sort((a,b)=>new Date(b.date)-new Date(a.date));
else if(sort==='date-asc')reviews.sort((a,b)=>new Date(a.date)-new Date(b.date));
else if(sort==='rating-desc')reviews.sort((a,b)=>b.rating-a.rating);
else if(sort==='rating-asc')reviews.sort((a,b)=>a.rating-b.rating);
document.getElementById('reviewsList').innerHTML=renderReviewsList(reviews);
}

// ============ SINGLE PRODUCT ============
let selectedSize=null;let selectedQty=1;
function renderSingleProduct(pid){
const products=getStore('products',[]);
const p=products.find(x=>x.id===pid);
if(!p){showToast('Ù…Ø­ØµÙˆÙ„ ÛŒØ§ÙØª Ù†Ø´Ø¯','error');navigateTo('home');return}
selectedSize=null;selectedQty=1;
const disc=Math.round((1-p.price/p.oldPrice)*100);
const favs=getStore('favorites_'+(currentUser?currentUser.username:''),[]);
const isFav=favs.includes(p.id);
const reviews=getProductReviews(p.id);
const avgR=reviews.length?reviews.reduce((s,r)=>s+r.rating,0)/reviews.length:p.rating;
document.getElementById('singleProductContent').innerHTML=`
<div class="sp-gallery"><img class="sp-main-img" src="${p.img}" alt="${p.name}" onerror="this.src='https://picsum.photos/seed/${p.id}/600/600'"></div>
<div class="sp-info">
<div class="sp-category">${p.category}</div>
<h1>${p.name}</h1>
<div class="sp-rating">${renderStars(avgR)} <span style="color:#999;font-size:14px;margin-right:8px">(${toPersianNum(avgR.toFixed(1))} Ø§Ø² Ûµ - ${toPersianNum(reviews.length)} Ù†Ø¸Ø± - ${toPersianNum(p.sales)} ÙØ±ÙˆØ´)</span></div>
<div class="sp-price-box"><span class="sp-price">${formatPrice(p.price)}</span>${p.oldPrice>p.price?`<span class="sp-old-price">${formatPrice(p.oldPrice)}</span><span class="sp-discount">${toPersianNum(disc)}Ùª</span>`:''}</div>
<p class="sp-desc">${p.shortDesc}</p>
<div class="sp-colors"><h4>Ø±Ù†Ú¯: ${p.color}</h4><span class="color-dot" style="background:${p.colorHex}"></span></div>
<div class="sp-sizes"><h4>Ø³Ø§ÛŒØ²:</h4><div class="sizes-list">${Object.entries(p.sizes).map(([s,stock])=>`<button class="size-btn ${stock===0?'out-of-stock':''}" onclick="${stock>0?`selectSize(this,'${s}',${stock})`:'void(0)'}" ${stock===0?'disabled':''}>${s}${stock===0?' (Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯)':''}</button>`).join('')}</div></div>
<div class="sp-quantity"><span style="font-weight:700">ØªØ¹Ø¯Ø§Ø¯:</span><button class="qty-btn" onclick="changeQty(-1)">âˆ’</button><span class="qty-val" id="qtyVal">${toPersianNum(1)}</span><button class="qty-btn" onclick="changeQty(1)">+</button></div>
<div class="sp-actions">
<button class="sp-add-cart" onclick="addToCart('${p.id}')">ğŸ›’ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
<button class="sp-add-fav ${isFav?'active':''}" onclick="toggleFav('${p.id}');renderSingleProduct('${p.id}')">${isFav?'â™¥':'â™¡'}</button>
</div>
</div>
<div class="sp-long-desc" style="grid-column:1/-1"><h3>ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ù…Ù„ Ù…Ø­ØµÙˆÙ„</h3><p style="line-height:2.2;color:var(--text-light)">${p.longDesc}</p></div>
${renderReviewsSection(p.id)}`}

function selectSize(btn,size,stock){document.querySelectorAll('.size-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');selectedSize=size;if(selectedQty>stock){selectedQty=stock;document.getElementById('qtyVal').textContent=toPersianNum(selectedQty)}}
function changeQty(d){const nq=selectedQty+d;if(nq>=1&&nq<=99){selectedQty=nq;document.getElementById('qtyVal').textContent=toPersianNum(selectedQty)}}

// ============ CART ============
function getCart(){return getStore('cart_'+(currentUser?currentUser.username:''),[])}
function setCart(c){setStore('cart_'+(currentUser?currentUser.username:''),c);updateCartCount()}

function quickAddCart(pid){
if(!requireAuth())return;
const p=getStore('products',[]).find(x=>x.id===pid);if(!p)return;
const firstAvail=Object.entries(p.sizes).find(([s,st])=>st>0);
if(!firstAvail){showToast('Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª','error');return}
const cart=getCart();const ex=cart.find(i=>i.productId===pid&&i.size===firstAvail[0]);
if(ex)ex.qty++;else cart.push({productId:pid,size:firstAvail[0],qty:1});
setCart(cart);showToast('Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ âœ“','success');
}

function addToCart(pid){
if(!requireAuth())return;
if(!selectedSize){showToast('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø³Ø§ÛŒØ² Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯','error');return}
const cart=getCart();const ex=cart.find(i=>i.productId===pid&&i.size===selectedSize);
if(ex)ex.qty+=selectedQty;else cart.push({productId:pid,size:selectedSize,qty:selectedQty});
setCart(cart);showToast('Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ âœ“','success');
}

function removeFromCart(idx){const cart=getCart();cart.splice(idx,1);setCart(cart);renderCart()}
function updateCartQty(idx,d){const cart=getCart();cart[idx].qty+=d;if(cart[idx].qty<1)cart.splice(idx,1);setCart(cart);renderCart()}

function renderCart(){
const cart=getCart();const products=getStore('products',[]);const el=document.getElementById('cartContent');
if(!cart.length){el.innerHTML='<div class="empty-state"><div class="empty-icon">ğŸ›’</div><p>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p><button class="hero-btn" onclick="navigateTo(\'products\')" style="font-size:14px;padding:12px 32px">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª</button></div>';return}
let total=0;
const items=cart.map((item,i)=>{const p=products.find(x=>x.id===item.productId);if(!p)return'';const sub=p.price*item.qty;total+=sub;
return`<div class="cart-item"><img class="cart-item-img" src="${p.img}" alt="${p.name}" onerror="this.src='https://picsum.photos/seed/${p.id}/100/100'"><div class="cart-item-info"><div class="cart-item-title">${p.name}</div><div class="cart-item-meta">Ø³Ø§ÛŒØ²: ${item.size} | Ø±Ù†Ú¯: ${p.color}</div><div class="qty-controls" style="margin-top:8px"><button class="qty-btn" style="width:30px;height:30px;font-size:16px" onclick="updateCartQty(${i},-1)">âˆ’</button><span style="font-weight:700;min-width:30px;text-align:center">${toPersianNum(item.qty)}</span><button class="qty-btn" style="width:30px;height:30px;font-size:16px" onclick="updateCartQty(${i},1)">+</button></div></div><div style="text-align:left"><div class="cart-item-price">${formatPrice(sub)}</div><button class="cart-item-remove" onclick="removeFromCart(${i})">âœ•</button></div></div>`}).join('');
el.innerHTML=`<div class="cart-items">${items}</div><div class="cart-summary"><div class="cart-summary-row"><span>Ø¬Ù…Ø¹ Ú©Ù„:</span><span>${formatPrice(total)}</span></div><div class="cart-summary-row" id="discountRow" style="display:none"><span>ØªØ®ÙÛŒÙ:</span><span id="discountAmount"></span></div><div class="cart-summary-row" id="finalRow"><span>Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª:</span><span id="finalAmount">${formatPrice(total)}</span></div><div class="discount-input-group"><input type="text" id="discountCodeInput" placeholder="Ú©Ø¯ ØªØ®ÙÛŒÙ"><button onclick="applyDiscount()">Ø§Ø¹Ù…Ø§Ù„</button></div><button class="checkout-btn" onclick="checkout(${total})">ğŸ›ï¸ Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button></div>`;
}

let appliedDiscount=0;
function applyDiscount(){
const code=document.getElementById('discountCodeInput').value.trim().toUpperCase();
if(!code){showToast('Ú©Ø¯ ØªØ®ÙÛŒÙ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error');return}
const disc=getStore('discounts',[]).find(d=>d.code===code);
if(!disc){showToast('Ú©Ø¯ ØªØ®ÙÛŒÙ Ù†Ø§Ù…Ø¹ØªØ¨Ø±','error');return}
if(!disc.active){showToast('Ø§ÛŒÙ† Ú©Ø¯ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø§Ø³Øª','error');return}
if(new Date(disc.expiry)<new Date()){showToast('Ú©Ø¯ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡','error');return}
if(disc.usedCount>=disc.usageLimit){showToast('Ø¸Ø±ÙÛŒØª ØªÙ…Ø§Ù… Ø´Ø¯Ù‡','error');return}
const cart=getCart();const products=getStore('products',[]);
let total=0;cart.forEach(item=>{const p=products.find(x=>x.id===item.productId);if(p)total+=p.price*item.qty});
const discAmt=Math.round(total*disc.percent/100);const final=total-discAmt;
document.getElementById('discountRow').style.display='flex';
document.getElementById('discountAmount').textContent=formatPrice(discAmt)+' ('+toPersianNum(disc.percent)+'Ùª)';
document.getElementById('finalAmount').textContent=formatPrice(final);
document.querySelector('.checkout-btn').setAttribute('onclick',`checkout(${final},'${code}')`);
appliedDiscount=disc.percent;showToast('Ú©Ø¯ ØªØ®ÙÛŒÙ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯! ğŸ‰','success');
}

function checkout(amount,discountCode=''){
if(!requireAuth())return;const cart=getCart();if(!cart.length){showToast('Ø³Ø¨Ø¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª','error');return}
const products=getStore('products',[]);const orders=getStore('orders',[]);
const orderItems=cart.map(item=>{const p=products.find(x=>x.id===item.productId);return{...item,name:p?p.name:'',price:p?p.price:0,color:p?p.color:''}});
const allP=getStore('products',[]);
cart.forEach(item=>{const p=allP.find(x=>x.id===item.productId);if(p&&p.sizes[item.size]!==undefined){p.sizes[item.size]=Math.max(0,p.sizes[item.size]-item.qty);p.sales=(p.sales||0)+item.qty}});
setStore('products',allP);
if(discountCode){const discs=getStore('discounts',[]);const d=discs.find(x=>x.code===discountCode);if(d)d.usedCount++;setStore('discounts',discs)}
orders.push({id:generateId(),user:currentUser.username,items:orderItems,total:amount,discountCode,status:'pending',date:new Date().toISOString()});
setStore('orders',orders);setCart([]);appliedDiscount=0;renderCart();showToast('Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯! ğŸ‰','success');
}

// ============ FAVORITES ============
function getFavs(){return getStore('favorites_'+(currentUser?currentUser.username:''),[])}
function setFavs(f){setStore('favorites_'+(currentUser?currentUser.username:''),f);updateFavCount()}
function toggleFav(pid){
if(!requireAuth())return;let favs=getFavs();const idx=favs.indexOf(pid);
if(idx>-1){favs.splice(idx,1);showToast('Ø§Ø² Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø­Ø°Ù Ø´Ø¯','info')}else{favs.push(pid);showToast('Ø¨Ù‡ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ â™¥','success')}
setFavs(favs);renderHome();
if(document.getElementById('page-products').classList.contains('active'))filterProducts();
if(document.getElementById('page-favorites').classList.contains('active'))renderFavorites();
}
function renderFavorites(){
if(!currentUser){document.getElementById('favContent').innerHTML='<div class="empty-state" style="grid-column:1/-1"><div class="empty-icon">â™¡</div><p>Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</p></div>';return}
const favs=getFavs();const products=getStore('products',[]).filter(p=>favs.includes(p.id));
document.getElementById('favContent').innerHTML=products.length?products.map((p,i)=>productCardHTML(p,i)).join(''):'<div class="empty-state" style="grid-column:1/-1"><div class="empty-icon">â™¡</div><p>Ù„ÛŒØ³Øª Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p></div>';
}

// ============ UI ============
function updateCartCount(){document.getElementById('cartCount').textContent=toPersianNum(getCart().reduce((s,i)=>s+i.qty,0))}
function updateFavCount(){document.getElementById('favCount').textContent=toPersianNum(getFavs().length)}
function updateUI(){
updateCartCount();updateFavCount();
const btn=document.getElementById('userBtn');const adm=document.getElementById('adminNavBtn');
if(currentUser){btn.textContent=currentUser.name.charAt(0);btn.style.background=currentUser.isAdmin?'var(--gold)':'var(--primary)';btn.style.color='#fff';btn.title='Ø®Ø±ÙˆØ¬: '+currentUser.name;adm.style.display=currentUser.isAdmin?'inline-block':'none'}
else{btn.textContent='ğŸ‘¤';btn.style.background='#f5f5f5';btn.style.color='var(--text)';btn.title='ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…';adm.style.display='none'}
}

function submitContact(){
const n=document.getElementById('contactName').value.trim(),e=document.getElementById('contactEmail').value.trim(),s=document.getElementById('contactSubject').value.trim(),m=document.getElementById('contactMessage').value.trim();
if(!n||!e||!s||!m){showToast('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯','error');return}
if(!e.includes('@')){showToast('Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error');return}
showToast('Ù¾ÛŒØ§Ù… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯! âœ‰ï¸','success');['contactName','contactEmail','contactSubject','contactMessage'].forEach(id=>document.getElementById(id).value='');
}

// ============ ADMIN ============
let currentAdminTab='dashboard';
function showAdminTab(tab,btn){currentAdminTab=tab;document.querySelectorAll('.admin-nav button').forEach(b=>b.classList.remove('active'));if(btn)btn.classList.add('active');renderAdmin()}

function renderAdmin(){
const el=document.getElementById('adminContent');
const tabs={dashboard:renderAdminDashboard,'admin-products':renderAdminProducts,'admin-orders':renderAdminOrders,'admin-discounts':renderAdminDiscounts,'admin-inventory':renderAdminInventory,'admin-users':renderAdminUsers,'admin-colors':renderAdminColors,'admin-stats':renderAdminSalesStats,'admin-security':renderAdminSecurity,'admin-reviews':renderAdminReviews};
(tabs[currentAdminTab]||renderAdminDashboard)(el);
}

function renderAdminDashboard(el){
const products=getStore('products',[]),orders=getStore('orders',[]),users=getStore('users',[]),reviews=getStore('reviews',[]);
const totalSales=orders.reduce((s,o)=>s+o.total,0);
const sizeCount={};orders.forEach(o=>o.items.forEach(i=>{sizeCount[i.size]=(sizeCount[i.size]||0)+i.qty}));
const sizeEntries=Object.entries(sizeCount).sort((a,b)=>b[1]-a[1]).slice(0,10);
const maxSV=Math.max(...sizeEntries.map(e=>e[1]),1);
const best=products.slice().sort((a,b)=>b.sales-a.sales).slice(0,5);
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</h2>
<div class="admin-stats">
<div class="stat-card"><div class="stat-icon">ğŸ’°</div><div class="stat-num">${formatPrice(totalSales)}</div><div class="stat-label">Ú©Ù„ ÙØ±ÙˆØ´</div></div>
<div class="stat-card"><div class="stat-icon">ğŸ›ï¸</div><div class="stat-num">${toPersianNum(orders.length)}</div><div class="stat-label">Ø³ÙØ§Ø±Ø´Ø§Øª</div></div>
<div class="stat-card"><div class="stat-icon">ğŸ‘¥</div><div class="stat-num">${toPersianNum(users.length)}</div><div class="stat-label">Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</div></div>
<div class="stat-card"><div class="stat-icon">ğŸ“¦</div><div class="stat-num">${toPersianNum(products.length)}</div><div class="stat-label">Ù…Ø­ØµÙˆÙ„Ø§Øª</div></div>
<div class="stat-card"><div class="stat-icon">â­</div><div class="stat-num">${toPersianNum(reviews.length)}</div><div class="stat-label">Ù†Ø¸Ø±Ø§Øª</div></div>
</div>
<h3 style="margin-bottom:16px;font-weight:700">ğŸ“Š Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø³Ø§ÛŒØ²Ù‡Ø§</h3>
<div class="chart-bar-container" style="margin-bottom:32px;padding-bottom:40px">
${sizeEntries.length?sizeEntries.map(([s,v])=>`<div class="chart-bar" style="height:${(v/maxSV)*100}%"><span class="chart-bar-val">${toPersianNum(v)}</span><span class="chart-bar-label">${s}</span></div>`).join(''):'<p style="text-align:center;width:100%;color:#999">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</p>'}
</div>
<h3 style="margin-bottom:16px;font-weight:700">ğŸ† Ù¾Ø±ÙØ±ÙˆØ´â€ŒØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª</h3>
<table class="admin-table"><tr><th>Ù…Ø­ØµÙˆÙ„</th><th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th><th>Ø±Ù†Ú¯</th><th>Ù‚ÛŒÙ…Øª</th><th>ÙØ±ÙˆØ´</th></tr>
${best.map(p=>`<tr><td>${p.name}</td><td>${p.category}</td><td><span class="color-dot" style="background:${p.colorHex};width:16px;height:16px;vertical-align:middle"></span> ${p.color}</td><td>${formatPrice(p.price)}</td><td>${toPersianNum(p.sales)}</td></tr>`).join('')}
</table>`}

function renderAdminProducts(el){
const products=getStore('products',[]);
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ“¦ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª</h2>
<button class="admin-btn admin-btn-add" onclick="showAddProductForm()">+ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯</button>
<div id="adminProductForm"></div>
<table class="admin-table"><tr><th>ØªØµÙˆÛŒØ±</th><th>Ù†Ø§Ù…</th><th>Ø¯Ø³ØªÙ‡</th><th>Ø±Ù†Ú¯</th><th>Ù‚ÛŒÙ…Øª</th><th>ÙØ±ÙˆØ´</th><th>Ø¹Ù…Ù„ÛŒØ§Øª</th></tr>
${products.map(p=>`<tr><td><img src="${p.img}" style="width:50px;height:50px;border-radius:6px;object-fit:cover" onerror="this.src='https://picsum.photos/seed/${p.id}/50/50'"></td><td>${p.name}</td><td>${p.category}</td><td><span class="color-dot" style="background:${p.colorHex};width:14px;height:14px;vertical-align:middle"></span> ${p.color}</td><td>${formatPrice(p.price)}</td><td>${toPersianNum(p.sales)}</td><td><button class="admin-btn admin-btn-edit" onclick="editProduct('${p.id}')">ÙˆÛŒØ±Ø§ÛŒØ´</button> <button class="admin-btn admin-btn-delete" onclick="deleteProduct('${p.id}')">Ø­Ø°Ù</button></td></tr>`).join('')}</table>`}

function showAddProductForm(editP=null){
const e=!!editP;const f=document.getElementById('adminProductForm');
f.innerHTML=`<div class="admin-form"><h3 style="margin-bottom:16px">${e?'ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„':'Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯'}</h3>
<div class="form-row"><div class="form-group"><label>Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„</label><input type="text" id="apName" value="${e?editP.name:''}"></div><div class="form-group"><label>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label><select id="apCategory"><option value="Ú©ÙØ´" ${e&&editP.category==='Ú©ÙØ´'?'selected':''}>Ú©ÙØ´</option><option value="Ù„Ø¨Ø§Ø³" ${e&&editP.category==='Ù„Ø¨Ø§Ø³'?'selected':''}>Ù„Ø¨Ø§Ø³</option><option value="Ú©ÛŒÙ" ${e&&editP.category==='Ú©ÛŒÙ'?'selected':''}>Ú©ÛŒÙ</option></select></div></div>
<div class="form-row"><div class="form-group"><label>Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)</label><input type="number" id="apPrice" value="${e?editP.price:''}"></div><div class="form-group"><label>Ù‚ÛŒÙ…Øª Ù‚Ø¨Ù„ÛŒ</label><input type="number" id="apOldPrice" value="${e?editP.oldPrice:''}"></div></div>
<div class="form-row"><div class="form-group"><label>Ø±Ù†Ú¯</label><input type="text" id="apColor" value="${e?editP.color:''}"></div><div class="form-group"><label>Ú©Ø¯ Ø±Ù†Ú¯ (Hex)</label><div style="display:flex;gap:8px;align-items:center"><input type="color" id="apColorHex" value="${e?editP.colorHex:'#333333'}" style="width:50px;height:36px;border:none;cursor:pointer"><input type="text" id="apColorHexText" value="${e?editP.colorHex:'#333333'}" style="flex:1;padding:8px;border:1px solid var(--border);border-radius:6px;font-family:monospace" oninput="document.getElementById('apColorHex').value=this.value"></div></div></div>
<div class="form-row"><div class="form-group"><label>Ù„ÛŒÙ†Ú© ØªØµÙˆÛŒØ±</label><input type="text" id="apImg" value="${e?editP.img:''}"></div></div>
<div class="form-group"><label>ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡</label><input type="text" id="apShortDesc" value="${e?editP.shortDesc:''}"></div>
<div class="form-group"><label>ØªÙˆØ¶ÛŒØ­ Ú©Ø§Ù…Ù„</label><textarea id="apLongDesc" style="width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;min-height:80px">${e?editP.longDesc:''}</textarea></div>
<div class="form-group"><label>Ø³Ø§ÛŒØ²Ù‡Ø§ Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÛŒ (Ù…Ø«Ø§Ù„: S:10,M:20,L:15)</label><input type="text" id="apSizes" value="${e?Object.entries(editP.sizes).map(([s,q])=>s+':'+q).join(','):''}"></div>
<button class="form-btn" onclick="${e?`saveEditProduct('${editP.id}')`:'saveNewProduct()'}" style="max-width:200px">${e?'Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª':'Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­ØµÙˆÙ„'}</button>
<button class="admin-btn" onclick="document.getElementById('adminProductForm').innerHTML=''" style="margin-right:8px;background:#eee;padding:10px 24px;border-radius:8px">Ù„ØºÙˆ</button></div>`}

function saveNewProduct(){
const name=document.getElementById('apName').value.trim(),cat=document.getElementById('apCategory').value,price=parseInt(document.getElementById('apPrice').value)||0,oldPrice=parseInt(document.getElementById('apOldPrice').value)||price;
const color=document.getElementById('apColor').value.trim()||'Ù…Ø´Ú©ÛŒ',colorHex=document.getElementById('apColorHex').value||'#333';
const img=document.getElementById('apImg').value.trim()||'https://picsum.photos/seed/new'+Date.now()+'/600/600';
const shortDesc=document.getElementById('apShortDesc').value.trim(),longDesc=document.getElementById('apLongDesc').value.trim();
const sizesStr=document.getElementById('apSizes').value.trim();
if(!name||!price){showToast('Ù†Ø§Ù… Ùˆ Ù‚ÛŒÙ…Øª Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª','error');return}
const sizes={};if(sizesStr)sizesStr.split(',').forEach(s=>{const[k,v]=s.split(':');if(k)sizes[k.trim()]=parseInt(v)||0});else sizes['ÙØ±ÛŒ']=10;
const products=getStore('products',[]);products.push({id:generateId(),name,category:cat,price,oldPrice,sizes,color,colorHex,shortDesc,longDesc,img,rating:4.0,sales:0});
setStore('products',products);showToast('Ù…Ø­ØµÙˆÙ„ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯','success');renderAdminProducts(document.getElementById('adminContent'));
}
function editProduct(id){const p=getStore('products',[]).find(x=>x.id===id);if(p)showAddProductForm(p)}
function saveEditProduct(id){
const products=getStore('products',[]);const p=products.find(x=>x.id===id);if(!p)return;
p.name=document.getElementById('apName').value.trim()||p.name;p.category=document.getElementById('apCategory').value;
p.price=parseInt(document.getElementById('apPrice').value)||p.price;p.oldPrice=parseInt(document.getElementById('apOldPrice').value)||p.oldPrice;
p.color=document.getElementById('apColor').value.trim()||p.color;p.colorHex=document.getElementById('apColorHex').value||p.colorHex;
p.img=document.getElementById('apImg').value.trim()||p.img;p.shortDesc=document.getElementById('apShortDesc').value.trim()||p.shortDesc;
p.longDesc=document.getElementById('apLongDesc').value.trim()||p.longDesc;
const sz=document.getElementById('apSizes').value.trim();if(sz){p.sizes={};sz.split(',').forEach(s=>{const[k,v]=s.split(':');if(k)p.sizes[k.trim()]=parseInt(v)||0})}
setStore('products',products);showToast('Ù…Ø­ØµÙˆÙ„ ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯','success');renderAdminProducts(document.getElementById('adminContent'));
}
function deleteProduct(id){if(!confirm('Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„ØŸ'))return;setStore('products',getStore('products',[]).filter(p=>p.id!==id));showToast('Ù…Ø­ØµÙˆÙ„ Ø­Ø°Ù Ø´Ø¯','success');renderAdminProducts(document.getElementById('adminContent'))}

function renderAdminOrders(el){
const orders=getStore('orders',[]);
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ›ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙØ§Ø±Ø´Ø§Øª</h2>
${!orders.length?'<p style="color:#999">Ø³ÙØ§Ø±Ø´ÛŒ Ù†ÛŒØ³Øª</p>':orders.slice().reverse().map(o=>`<div class="order-card">
<div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px"><h4>Ø³ÙØ§Ø±Ø´ ${o.id.substr(0,8)} - ${o.user}</h4><span class="order-status ${o.status}">${o.status==='pending'?'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±':'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡'}</span></div>
<p style="font-size:13px;color:#999;margin:4px 0">${new Date(o.date).toLocaleDateString('fa-IR')}</p>
<p style="font-size:14px;margin:4px 0">${o.items.map(i=>i.name+' ('+i.size+(i.color?' - '+i.color:'')+' Ã— '+toPersianNum(i.qty)+')').join(' | ')}</p>
<p style="font-weight:700;margin-top:8px">Ù…Ø¨Ù„Øº: ${formatPrice(o.total)} ${o.discountCode?'(Ú©Ø¯: '+o.discountCode+')':''}</p>
<button class="admin-btn admin-btn-edit" style="margin-top:8px" onclick="toggleOrderStatus('${o.id}')">${o.status==='pending'?'ØªÚ©Ù…ÛŒÙ„':'Ø¨Ø±Ú¯Ø´Øª'}</button></div>`).join('')}`}
function toggleOrderStatus(oid){const orders=getStore('orders',[]);const o=orders.find(x=>x.id===oid);if(o){o.status=o.status==='pending'?'completed':'pending';setStore('orders',orders);renderAdminOrders(document.getElementById('adminContent'));showToast('ÙˆØ¶Ø¹ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯','success')}}

function renderAdminDiscounts(el){
const discs=getStore('discounts',[]);
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ« Ú©Ø¯Ù‡Ø§ÛŒ ØªØ®ÙÛŒÙ</h2>
<button class="admin-btn admin-btn-add" onclick="showAddDiscountForm()">+ Ú©Ø¯ ØªØ®ÙÛŒÙ Ø¬Ø¯ÛŒØ¯</button><div id="adminDiscountForm"></div>
<table class="admin-table"><tr><th>Ú©Ø¯</th><th>Ø¯Ø±ØµØ¯</th><th>Ø§Ù†Ù‚Ø¶Ø§</th><th>Ù…Ø­Ø¯ÙˆØ¯ÛŒØª</th><th>Ø§Ø³ØªÙØ§Ø¯Ù‡</th><th>ÙˆØ¶Ø¹ÛŒØª</th><th>Ø¹Ù…Ù„ÛŒØ§Øª</th></tr>
${discs.map(d=>`<tr><td style="font-weight:700">${d.code}</td><td>${toPersianNum(d.percent)}Ùª</td><td>${d.expiry}</td><td>${toPersianNum(d.usageLimit)}</td><td>${toPersianNum(d.usedCount)}</td><td><span style="color:${d.active?'green':'red'}">${d.active?'ÙØ¹Ø§Ù„':'ØºÛŒØ±ÙØ¹Ø§Ù„'}</span></td><td><button class="admin-btn admin-btn-edit" onclick="toggleDiscActive('${d.id}')">${d.active?'ØºÛŒØ±ÙØ¹Ø§Ù„':'ÙØ¹Ø§Ù„'}</button> <button class="admin-btn admin-btn-delete" onclick="deleteDiscount('${d.id}')">Ø­Ø°Ù</button></td></tr>`).join('')}</table>`}
function showAddDiscountForm(){document.getElementById('adminDiscountForm').innerHTML=`<div class="admin-form"><h3 style="margin-bottom:16px">Ú©Ø¯ ØªØ®ÙÛŒÙ Ø¬Ø¯ÛŒØ¯</h3><div class="form-row"><div class="form-group"><label>Ú©Ø¯</label><input type="text" id="adCode" placeholder="SAVE20"></div><div class="form-group"><label>Ø¯Ø±ØµØ¯</label><input type="number" id="adPercent" min="1" max="90"></div></div><div class="form-row"><div class="form-group"><label>Ø§Ù†Ù‚Ø¶Ø§</label><input type="date" id="adExpiry"></div><div class="form-group"><label>Ø­Ø¯Ø§Ú©Ø«Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡</label><input type="number" id="adLimit"></div></div><button class="form-btn" onclick="saveNewDiscount()" style="max-width:200px">Ø°Ø®ÛŒØ±Ù‡</button></div>`}
function saveNewDiscount(){const code=document.getElementById('adCode').value.trim().toUpperCase(),pct=parseInt(document.getElementById('adPercent').value)||0,exp=document.getElementById('adExpiry').value,lim=parseInt(document.getElementById('adLimit').value)||100;if(!code||!pct||!exp){showToast('ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯','error');return}const d=getStore('discounts',[]);d.push({id:generateId(),code,percent:pct,expiry:exp,usageLimit:lim,usedCount:0,active:true});setStore('discounts',d);showToast('Ú©Ø¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯','success');renderAdminDiscounts(document.getElementById('adminContent'))}
function toggleDiscActive(did){const d=getStore('discounts',[]);const x=d.find(i=>i.id===did);if(x){x.active=!x.active;setStore('discounts',d);renderAdminDiscounts(document.getElementById('adminContent'))}}
function deleteDiscount(did){if(!confirm('Ø­Ø°ÙØŸ'))return;setStore('discounts',getStore('discounts',[]).filter(d=>d.id!==did));renderAdminDiscounts(document.getElementById('adminContent'))}

function renderAdminInventory(el){
const products=getStore('products',[]);
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ“‹ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§Ù†Ø¨Ø§Ø±</h2>
<table class="admin-table"><tr><th>Ù…Ø­ØµÙˆÙ„</th><th>Ø¯Ø³ØªÙ‡</th><th>Ø±Ù†Ú¯</th><th>Ø³Ø§ÛŒØ² Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÛŒ</th><th>Ú©Ù„</th><th>ÙˆÛŒØ±Ø§ÛŒØ´</th></tr>
${products.map(p=>{const total=Object.values(p.sizes).reduce((s,v)=>s+v,0);
return`<tr><td>${p.name}</td><td>${p.category}</td><td><span class="color-dot" style="background:${p.colorHex};width:14px;height:14px;vertical-align:middle"></span> ${p.color}</td><td>${Object.entries(p.sizes).map(([s,q])=>`<span style="display:inline-block;margin:2px;padding:2px 8px;background:${q>0?'#e8f5e9':'#fce4ec'};border-radius:4px;font-size:12px">${s}: ${toPersianNum(q)}</span>`).join('')}</td><td style="font-weight:700;color:${total>0?'green':'red'}">${toPersianNum(total)}</td><td><button class="admin-btn admin-btn-edit" onclick="editProduct('${p.id}')">ÙˆÛŒØ±Ø§ÛŒØ´</button></td></tr>`}).join('')}</table>`}

function renderAdminUsers(el){
const users=getStore('users',[]);
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ‘¥ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (${toPersianNum(users.length)})</h2>
<table class="admin-table"><tr><th>Ù†Ø§Ù…</th><th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</th><th>Ø§ÛŒÙ…ÛŒÙ„</th><th>ØªØ§Ø±ÛŒØ®</th></tr>
${users.map(u=>`<tr><td>${u.name}</td><td>${u.username}</td><td>${u.email}</td><td>${u.createdAt?new Date(u.createdAt).toLocaleDateString('fa-IR'):'-'}</td></tr>`).join('')}</table>
${!users.length?'<p style="color:#999;margin-top:16px">Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù†ÛŒØ³Øª</p>':''}`}

// ============ ADMIN: COLORS ============
function renderAdminColors(el){
const c=getStore('adminColors',{});
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ¨ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¸Ø§Ù‡Ø±ÛŒ</h2>
<p style="color:var(--text-light);margin-bottom:20px">Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø³Ø§ÛŒØª Ø±Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ø¯ Hex ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯:</p>
<div class="color-picker-grid">
${[{key:'primary',label:'Ø±Ù†Ú¯ Ø§ØµÙ„ÛŒ',val:c.primary||'#1a1a2e'},{key:'gold',label:'Ø±Ù†Ú¯ Ø·Ù„Ø§ÛŒÛŒ',val:c.gold||'#d4a574'},{key:'accent',label:'Ø±Ù†Ú¯ ØªØ£Ú©ÛŒØ¯ÛŒ',val:c.accent||'#e94560'},{key:'btnPrimary',label:'Ø±Ù†Ú¯ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§',val:c.btnPrimary||'#1a1a2e'},{key:'bg',label:'Ø±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡',val:c.bg||'#fafafa'},{key:'catShoe',label:'Ø±Ù†Ú¯ Ø¯Ø³ØªÙ‡ Ú©ÙØ´',val:c.catShoe||'#667eea'},{key:'catCloth',label:'Ø±Ù†Ú¯ Ø¯Ø³ØªÙ‡ Ù„Ø¨Ø§Ø³',val:c.catCloth||'#f093fb'},{key:'catBag',label:'Ø±Ù†Ú¯ Ø¯Ø³ØªÙ‡ Ú©ÛŒÙ',val:c.catBag||'#4facfe'}].map(item=>`
<div class="color-picker-card">
<label>${item.label}</label>
<input type="color" id="ac_${item.key}" value="${item.val}" onchange="document.getElementById('ach_${item.key}').value=this.value">
<input type="text" class="hex-input" id="ach_${item.key}" value="${item.val}" oninput="document.getElementById('ac_${item.key}').value=this.value">
</div>`).join('')}
</div>
<div style="display:flex;gap:12px">
<button class="form-btn" onclick="saveAdminColors()" style="max-width:200px">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
<button class="admin-btn" onclick="resetAdminColors()" style="background:#fce4ec;color:#c62828;padding:12px 24px;border-radius:8px">â†© Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ</button>
</div>`}

function saveAdminColors(){
const keys=['primary','gold','accent','btnPrimary','bg','catShoe','catCloth','catBag'];
const c={};keys.forEach(k=>c[k]=document.getElementById('ac_'+k).value);
setStore('adminColors',c);applyCustomColors();showToast('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ ğŸ¨','success');
}
function resetAdminColors(){
const def={primary:'#1a1a2e',gold:'#d4a574',accent:'#e94560',btnPrimary:'#1a1a2e',bg:'#fafafa',catShoe:'#667eea',catCloth:'#f093fb',catBag:'#4facfe'};
setStore('adminColors',def);applyCustomColors();showToast('Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø´Ø¯','info');renderAdminColors(document.getElementById('adminContent'));
}

// ============ ADMIN: SALES STATS ============
function renderAdminSalesStats(el){
const orders=getStore('orders',[]),products=getStore('products',[]);
// Sales by color
const colorSales={};orders.forEach(o=>o.items.forEach(i=>{const p=products.find(x=>x.id===i.productId);if(p){colorSales[p.color]=(colorSales[p.color]||0)+i.qty}}));
const colorEntries=Object.entries(colorSales).sort((a,b)=>b[1]-a[1]);
// Sales by size
const sizeSales={};orders.forEach(o=>o.items.forEach(i=>{sizeSales[i.size]=(sizeSales[i.size]||0)+i.qty}));
const sizeEntries=Object.entries(sizeSales).sort((a,b)=>b[1]-a[1]);
const maxSz=Math.max(...sizeEntries.map(e=>e[1]),1);
// Sales by category
const catSales={};orders.forEach(o=>o.items.forEach(i=>{const p=products.find(x=>x.id===i.productId);if(p){catSales[p.category]=(catSales[p.category]||0)+i.qty}}));
const catEntries=Object.entries(catSales).sort((a,b)=>b[1]-a[1]);
const totalCat=catEntries.reduce((s,e)=>s+e[1],0)||1;
const catColors={'Ú©ÙØ´':'#667eea','Ù„Ø¨Ø§Ø³':'#f093fb','Ú©ÛŒÙ':'#4facfe'};

el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ“ˆ Ø¢Ù…Ø§Ø± ØªÙØµÛŒÙ„ÛŒ ÙØ±ÙˆØ´</h2>
<h3 style="margin-bottom:16px;font-weight:700">ÙØ±ÙˆØ´ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</h3>
<div class="pie-chart-container">
<div class="pie-chart" style="background:conic-gradient(${catEntries.map((e,i)=>{const start=catEntries.slice(0,i).reduce((s,x)=>s+x[1]/totalCat*100,0);const end=start+e[1]/totalCat*100;return`${catColors[e[0]]||'#999'} ${start}% ${end}%`}).join(',')})"></div>
<div class="pie-legend">${catEntries.map(([c,v])=>`<div class="pie-legend-item"><span class="pie-legend-dot" style="background:${catColors[c]||'#999'}"></span>${c}: ${toPersianNum(v)} Ø¹Ø¯Ø¯ (${toPersianNum(Math.round(v/totalCat*100))}Ùª)</div>`).join('')}</div>
</div>
<h3 style="margin-bottom:16px;font-weight:700">ÙØ±ÙˆØ´ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø±Ù†Ú¯</h3>
<table class="admin-table" style="margin-bottom:32px"><tr><th>Ø±Ù†Ú¯</th><th>ØªØ¹Ø¯Ø§Ø¯ ÙØ±ÙˆØ´</th><th>Ù†Ù…ÙˆØ¯Ø§Ø±</th></tr>
${colorEntries.map(([c,v])=>{const max=colorEntries[0]?.[1]||1;return`<tr><td>${c}</td><td>${toPersianNum(v)}</td><td><div style="background:var(--gold);height:20px;border-radius:4px;width:${v/max*100}%;min-width:4px;transition:width .5s ease"></div></td></tr>`}).join('')}
</table>
<h3 style="margin-bottom:16px;font-weight:700">ÙØ±ÙˆØ´ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø§ÛŒØ²</h3>
<div class="chart-bar-container" style="padding-bottom:40px">
${sizeEntries.length?sizeEntries.slice(0,12).map(([s,v])=>`<div class="chart-bar" style="height:${(v/maxSz)*100}%;background:linear-gradient(to top,var(--accent2),#5dade2)"><span class="chart-bar-val">${toPersianNum(v)}</span><span class="chart-bar-label">${s}</span></div>`).join(''):'<p style="text-align:center;width:100%;color:#999">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ù†ÛŒØ³Øª</p>'}
</div>`}

// ============ ADMIN: SECURITY ============
function renderAdminSecurity(el){
const settings=getStore('admin2fa',{enabled:true});
const log=getStore('securityLog',[]);
const failedAttempts=log.filter(l=>l.msg.includes('Ù†Ø§Ù…ÙˆÙÙ‚')).length;
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">ğŸ”’ Ø§Ù…Ù†ÛŒØª</h2>
${failedAttempts>0?`<div class="security-alert danger"><span class="alert-icon">âš ï¸</span><span class="alert-text">${toPersianNum(failedAttempts)} ØªÙ„Ø§Ø´ Ù†Ø§Ù…ÙˆÙÙ‚ ÙˆØ±ÙˆØ¯ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª</span></div>`:''}
<div class="security-alert success"><span class="alert-icon">âœ…</span><span class="alert-text">Ø³ÛŒØ³ØªÙ… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ ${settings.enabled?'ÙØ¹Ø§Ù„':'ØºÛŒØ±ÙØ¹Ø§Ù„'} Ø§Ø³Øª</span></div>
<div class="admin-form" style="margin-bottom:24px">
<h3 style="margin-bottom:16px">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</h3>
<div style="display:flex;align-items:center;gap:16px">
<label class="toggle-switch"><input type="checkbox" ${settings.enabled?'checked':''} onchange="toggle2FA(this.checked)"><span class="toggle-slider"></span></label>
<span style="font-weight:600">${settings.enabled?'ÙØ¹Ø§Ù„':'ØºÛŒØ±ÙØ¹Ø§Ù„'}</span>
</div>
<p style="color:var(--text-light);font-size:13px;margin-top:8px">Ø¨Ø§ ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ø§ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ØŒ Ù‡Ù†Ú¯Ø§Ù… ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ± ÛŒÚ© Ú©Ø¯ Û¶ Ø±Ù‚Ù…ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
</div>
<h3 style="margin-bottom:16px;font-weight:700">Ú¯Ø²Ø§Ø±Ø´ Ø§Ù…Ù†ÛŒØªÛŒ</h3>
<table class="admin-table"><tr><th>Ø±ÙˆÛŒØ¯Ø§Ø¯</th><th>ØªØ§Ø±ÛŒØ®</th></tr>
${log.slice(0,20).map(l=>`<tr><td>${l.msg}</td><td>${new Date(l.date).toLocaleString('fa-IR')}</td></tr>`).join('')}
</table>
${!log.length?'<p style="color:#999;margin-top:12px">Ø±ÙˆÛŒØ¯Ø§Ø¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</p>':''}`}

function toggle2FA(enabled){setStore('admin2fa',{enabled});showToast(enabled?'Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ ÙØ¹Ø§Ù„ Ø´Ø¯ ğŸ”':'ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯','info');renderAdminSecurity(document.getElementById('adminContent'))}

// ============ ADMIN: REVIEWS ============
function renderAdminReviews(el){
const reviews=getStore('reviews',[]);const products=getStore('products',[]);
el.innerHTML=`<h2 style="margin-bottom:24px;font-weight:800">â­ Ù†Ø¸Ø±Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (${toPersianNum(reviews.length)})</h2>
${!reviews.length?'<p style="color:#999">Ù†Ø¸Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</p>':
`<table class="admin-table"><tr><th>Ú©Ø§Ø±Ø¨Ø±</th><th>Ù…Ø­ØµÙˆÙ„</th><th>Ø§Ù…ØªÛŒØ§Ø²</th><th>Ù†Ø¸Ø±</th><th>ØªØ§Ø±ÛŒØ®</th><th>Ø¹Ù…Ù„ÛŒØ§Øª</th></tr>
${reviews.slice().reverse().map(r=>{const p=products.find(x=>x.id===r.productId);return`<tr><td>${r.user}</td><td>${p?p.name:'Ù†Ø§Ù…Ø´Ø®Øµ'}</td><td style="color:var(--gold)">${renderStars(r.rating)}</td><td style="max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${r.text}</td><td>${new Date(r.date).toLocaleDateString('fa-IR')}</td><td><button class="admin-btn admin-btn-delete" onclick="deleteReview('${r.id}')">Ø­Ø°Ù</button></td></tr>`}).join('')}
</table>`}`}

function deleteReview(rid){
if(!confirm('Ø­Ø°Ù Ù†Ø¸Ø±ØŸ'))return;
setStore('reviews',getStore('reviews',[]).filter(r=>r.id!==rid));
showToast('Ù†Ø¸Ø± Ø­Ø°Ù Ø´Ø¯','success');renderAdminReviews(document.getElementById('adminContent'));
}

// ============ INIT ============
initData();
applyCustomColors();
updateUI();
renderHome();
</script>
</body>
</html>
